Object Russia_VehicleTopolM

  ; *** ART Parameters ***
  SelectPortrait         = SS-27ic_L
  ButtonImage            = SS-27ic_L
  
  UpgradeCameo1 = Upgrade_BuyMissile
  UpgradeCameo2 = Upgrade_LightVehicleArmor
  UpgradeCameo3 = Upgrade_RUSSIA_MirvTechnology

;-----------------------------------------------NEW CODE-------------------------------------------------------------------

  Draw = W3DTruckDraw ModuleTag_01

    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY TERTIARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model                           = RU-SS-27
      Turret = TURRET
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
      HideSubObject     = WeaponA01 HOUSECOLOR07
      ;TransitionKey     = TRANS_UNARMED_PACKED
    End
    AliasConditionState = RIDER1
    AliasConditionState = RIDER3


    ConditionState      = RIDER1 UNPACKING
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End

    ConditionState      = RIDER1 PACKING
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End
    
    ConditionState      = RIDER1 DEPLOYED 
      Model                           = RU-SS-27D
      Turret = TURRET
      HideSubObject     = WeaponA01 HOUSECOLOR07
      ;TransitionKey     = TRANS_UNARMED_UNPACKED
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
     AliasConditionState = RIDER1 DEPLOYED PREATTACK_B   
     AliasConditionState = RIDER1 DEPLOYED PREATTACK_C
    AliasConditionState = RIDER3 DEPLOYED 

    
    ;Armed with missile
    
    ConditionState      = RIDER2
      Model                           = RU-SS-27
      Turret = TURRET
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End

    ConditionState      = RIDER2 UNPACKING
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End

    ConditionState      = RIDER2 PACKING
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End
    
    ConditionState      = RIDER2 DEPLOYED 
      Model                           = RU-SS-27D
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End

    ConditionState      = RIDER2 DAMAGED DEPLOYED 
      Model                           = RU-SS-27D_DM
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
    AliasConditionState = RIDER2 DEPLOYED REALLYDAMAGED 

    ConditionState      = RIDER2 DEPLOYED PREATTACK_B
      Model                           = RU-SS-27D
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
    
    ConditionState      = RIDER2 DAMAGED DEPLOYED PREATTACK_B
      Model                           = RU-SS-27D_DM
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
    AliasConditionState = RIDER2 DEPLOYED PREATTACK_B REALLYDAMAGED 

    ConditionState      = RIDER2 DEPLOYED PREATTACK_C
      Model                           = RU-SS-27D
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End

    ConditionState      = RIDER2 DAMAGED DEPLOYED PREATTACK_C
      Model                           = RU-SS-27D_DM
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
    AliasConditionState = RIDER2 DEPLOYED PREATTACK_C REALLYDAMAGED 
    ;Reallydamaged conditions
    
   ConditionState       = RIDER1 DAMAGED
      Model                           = RU-SS-27DM
      ;Animation                       = RU-SS-27DM.RU-SS-27DM
      ;AnimationMode     = ONCE
      ;Flags             = START_FRAME_LAST
      HideSubObject     = WeaponA01 HOUSECOLOR07
      ;TransitionKey     = TRANS_DAMAGED_UNARMED_PACKED
    End
    AliasConditionState = RUBBLE
    AliasConditionState = RIDER1 RUBBLE
    AliasConditionState = RIDER1 REALLYDAMAGED 

    ConditionState      = RIDER1 DAMAGED UNPACKING
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End
    AliasConditionState = RIDER1 UNPACKING REALLYDAMAGED 

    ConditionState      = RIDER1 DAMAGED PACKING
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End
    AliasConditionState = RIDER1 PACKING REALLYDAMAGED 
    
    ConditionState      = RIDER1 DAMAGED DEPLOYED 
      Model                           = RU-SS-27D_DM
      HideSubObject     = WeaponA01 HOUSECOLOR07
      ;TransitionKey     = TRANS_DAMAGED_UNARMED_UNPACKED
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
    AliasConditionState = RIDER1 REALLYDAMAGED DEPLOYED
    AliasConditionState = RIDER1 REALLYDAMAGED DEPLOYED PREATTACK_B
    
    ;Armed with missile
    
    ConditionState      = RIDER2 DAMAGED
      Model                           = RU-SS-27DM
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      ;TransitionKey     = TRANS_DAMAGED_ARMED_PACKED
    End
    AliasConditionState = RIDER2 RUBBLE
    AliasConditionState = RIDER2 REALLYDAMAGED

    ConditionState      = RIDER2 DAMAGED UNPACKING
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End
    AliasConditionState = RIDER2 REALLYDAMAGED DEPLOYED UNPACKING

    ConditionState      = RIDER2 DAMAGED PACKING
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End
    AliasConditionState = RIDER2 REALLYDAMAGED DEPLOYED PACKING

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftRearTireBone      = Tire07
    RightRearTireBone     = Tire05
    MidLeftRearTireBone   = Tire08
    MidRightRearTireBone  = Tire06

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.

  End

;---------------------------------------END OF NEW CODE-------------------------------------------------------------


  Draw = W3DTruckDraw ModuleTag_02
  
    DefaultConditionState
      Model = RU-SS-27W
    End
    AliasConditionState = RIDER1
    AliasConditionState = RIDER2
    
    ConditionState = DAMAGED
      Model = RU-SS-27WDM
    End
    AliasConditionState = RUBBLE
    AliasConditionState = RIDER1 DAMAGED
    AliasConditionState = RIDER2 DAMAGED
    AliasConditionState = RIDER1 REALLYDAMAGED
    AliasConditionState = RIDER2 REALLYDAMAGED


    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Model = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = RIDER1 MOVING
    AliasConditionState = RIDER2 MOVING


    ConditionState    = DAMAGED MOVING
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = RIDER1 DAMAGED MOVING
    AliasConditionState = RIDER2 DAMAGED MOVING
    AliasConditionState = RIDER1 REALLYDAMAGED MOVING
    AliasConditionState = RIDER2 REALLYDAMAGED MOVING
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Model = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
    End
    AliasConditionState = RIDER1 UNPACKING
    AliasConditionState = RIDER2 UNPACKING

    ConditionState    = DAMAGED UNPACKING
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
    End
    AliasConditionState = RIDER1 DAMAGED UNPACKING
    AliasConditionState = RIDER2 DAMAGED UNPACKING
    AliasConditionState = RIDER1 REALLYDAMAGED UNPACKING
    AliasConditionState = RIDER2 REALLYDAMAGED UNPACKING

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = RIDER1 PACKING
    AliasConditionState = RIDER2 PACKING

    ConditionState    = DAMAGED PACKING
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = RIDER1 DAMAGED PACKING
    AliasConditionState = RIDER2 DAMAGED PACKING
    AliasConditionState = RIDER1 REALLYDAMAGED PACKING
    AliasConditionState = RIDER2 REALLYDAMAGED PACKING

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = RIDER1 DEPLOYED
    AliasConditionState = RIDER2 DEPLOYED

    ConditionState  = DEPLOYED DAMAGED
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = RIDER1 DEPLOYED DAMAGED
    AliasConditionState = RIDER2 DEPLOYED DAMAGED
    AliasConditionState = RIDER1 REALLYDAMAGED DEPLOYED 
    AliasConditionState = RIDER2 REALLYDAMAGED DEPLOYED 

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07
    
    TireRotationMultiplier = 0.2
  End


;---------------------------------------END OF NEW CODE-------------------------------------------------------------


  Draw = W3DTruckDraw ModuleTag_NightLights
  
    DefaultConditionState
      Model = TopolM_N
    End
    AliasConditionState = RIDER1
    AliasConditionState = RIDER2
    
    ConditionState = DAMAGED
      Model = TopolM_N
    End
    AliasConditionState = RUBBLE
    AliasConditionState = RIDER1 DAMAGED
    AliasConditionState = RIDER2 DAMAGED
    AliasConditionState = RIDER1 REALLYDAMAGED
    AliasConditionState = RIDER2 REALLYDAMAGED


    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Model = TopolM_N
      Animation                       = TopolM_N.TopolM_N
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = RIDER1 MOVING
    AliasConditionState = RIDER2 MOVING


    ConditionState    = DAMAGED MOVING
      Model = TopolM_N
      Animation                       = TopolM_N.TopolM_N
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = RIDER1 DAMAGED MOVING
    AliasConditionState = RIDER2 DAMAGED MOVING
    AliasConditionState = RIDER1 REALLYDAMAGED MOVING
    AliasConditionState = RIDER2 REALLYDAMAGED MOVING
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Model = TopolM_N
      Animation                       = TopolM_N.TopolM_N
      AnimationMode   = ONCE
    End
    AliasConditionState = RIDER1 UNPACKING
    AliasConditionState = RIDER2 UNPACKING

    ConditionState    = DAMAGED UNPACKING
      Model = TopolM_N
      Animation                       = TopolM_N.TopolM_N
      AnimationMode   = ONCE
    End
    AliasConditionState = RIDER1 DAMAGED UNPACKING
    AliasConditionState = RIDER2 DAMAGED UNPACKING
    AliasConditionState = RIDER1 REALLYDAMAGED UNPACKING
    AliasConditionState = RIDER2 REALLYDAMAGED UNPACKING

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model = TopolM_N
      Animation                       = TopolM_N.TopolM_N
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = RIDER1 PACKING
    AliasConditionState = RIDER2 PACKING

    ConditionState    = DAMAGED PACKING
      Model = TopolM_N
      Animation                       = TopolM_N.TopolM_N
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = RIDER1 DAMAGED PACKING
    AliasConditionState = RIDER2 DAMAGED PACKING
    AliasConditionState = RIDER1 REALLYDAMAGED PACKING
    AliasConditionState = RIDER2 REALLYDAMAGED PACKING

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model = TopolM_N
      Animation                       = TopolM_N.TopolM_N
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = RIDER1 DEPLOYED
    AliasConditionState = RIDER2 DEPLOYED

    ConditionState  = DEPLOYED DAMAGED
      Model = TopolM_N
      Animation                       = TopolM_N.TopolM_N
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = RIDER1 DEPLOYED DAMAGED
    AliasConditionState = RIDER2 DEPLOYED DAMAGED
    AliasConditionState = RIDER1 REALLYDAMAGED DEPLOYED 
    AliasConditionState = RIDER2 REALLYDAMAGED DEPLOYED 
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SS27
  Side = Russia
  EditorSorting   = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost       = 2500
  BuildTime       = 25.0          ;in seconds    
  VisionRange     = 200
  ShroudClearingRange = 200

  WeaponSet
    Conditions = WEAPON_RIDER1
  End

  WeaponSet
    Conditions = WEAPON_RIDER1 PLAYER_UPGRADE
  End

  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon            = PRIMARY TopolMDeploybweapon
    AutoChooseSources = PRIMARY NONE
    Weapon = SECONDARY SS27_MissileWeapon
    AutoChooseSources = SECONDARY NONE
  End

  WeaponSet
    Conditions = WEAPON_RIDER2 PLAYER_UPGRADE
    Weapon            = PRIMARY TopolMDeploybweapon
    AutoChooseSources = PRIMARY NONE
    Weapon = SECONDARY SS27_MissileWeapon
    AutoChooseSources = SECONDARY NONE
    Weapon            = TERTIARY SS27_MissileWeapon2
    AutoChooseSources = TERTIARY NONE
  End

  WeaponSet
    Conditions = WEAPON_RIDER3
  End

  WeaponSet
    Conditions = WEAPON_RIDER3 PLAYER_UPGRADE
  End

  Prerequisites
    Object  = Russia_ProsperityCenter
    Science = SCIENCE_Russia_TopolM
  End
  ExperienceValue         = 250 250 350 600  ;Experience point value at each level
  IsTrainable = No             ;Can gain experience

  ArmorSet
    Conditions      = None
    Armor           = RussiaDeployArmor
    DamageFX        = TruckDamageFX
  End

  ArmorSet
    Conditions            = PLAYER_UPGRADE
    Armor                 = RussiaDeployArmor2
    DamageFX              = TruckDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = SS27DeployCommandSet

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!

  ; *** AUDIO Parameters ***
  VoiceSelect = TopolMVoiceSelect
  VoiceMove = TopolMVoiceMove
  VoiceAttack = TopolMVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate = TopolMVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoopLoud
    VoiceCrush = TomahawkVoiceCrush
    VoiceEnter = TopolMVoiceMove
    VoiceBombard = TopolMVoiceAttack
    Deploy              = TopolDeploy
    Undeploy            = TopolDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = VEHICLE HUGE_VEHICLE PRELOAD SELECTABLE SCORE CAN_CAST_REFLECTIONS CANNOT_RETALIATE GARRISONABLE_UNTIL_DESTROYED
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 550.0
    InitialHealth   = 550.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
     Turret
     TurretTurnRate        = 9999
     RecenterTime          = 1        ; how long to wait during idle before recentering
     ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
     NaturalTurretAngle    = 0
     InitiallyDisabled     = Yes
  End
    PackTime = 6666
    UnpackTime = 6666
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL TopolMLocomotor
  Locomotor = SET_NORMAL_UPGRADED TopolMLocomotor_UP
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

;Upgrades----------------------------------------------------------
  Behavior = LocomotorSetUpgrade Upgrade_01
    TriggeredBy = Upgrade_BallisticCommandset
  End
  Behavior                = ArmorUpgrade Upgrade_02
    TriggeredBy           = Upgrade_BallisticCommandset
  End
  Behavior = WeaponBonusUpgrade Upgrade_03
    TriggeredBy = Upgrade_Range
  End
  Behavior = ObjectCreationUpgrade Upgrade_04
    UpgradeObject = OCL_NukeEarlyWarningObject
    TriggeredBy   = Upgrade_AmericaScoutDrone
    RequiresAllTriggers = Yes
  End
  Behavior = ArmorUpgrade Upgrade_05
    TriggeredBy           = Upgrade_LightVehicleArmor
  End
  Behavior = MaxHealthUpgrade Upgrade_06
    TriggeredBy   = Upgrade_LightVehicleArmor
    AddMaxHealth  = 82.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End
  Behavior = WeaponSetUpgrade Upgrade_07
    TriggeredBy = Upgrade_RUSSIA_MirvTechnology
  End
;  Behavior = CommandSetUpgrade Upgrade_08
;    CommandSet = SS27ArmedCommandSet
;    TriggeredBy = Upgrade_RUSSIA_MirvTechnology
;  End
;Deaths-------------------------------------------------------------
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes = ALL -EXTRA_2 -CRUSHED -SPLATTED -POISONED -POISONED_BETA -EXTRA_8
    FX  = INITIAL  FX_BigMissileCarrierDeath
    OCL = MIDPOINT OCL_SCUDDebrisFlyoff
    OCL = FINAL    OCL_SS27Debris
  End
      ; A crushing defeat
  Behavior = FXListDie DeathTag_02
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie DeathTag_03
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_T90_CrushEffect
  End
  Behavior = DestroyDie DeathTag_04
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = SlowDeathBehavior DeathTag_05
    DeathTypes = NONE +EXTRA_2
    FX  = FINAL    None
  End
  Behavior = CreateObjectDie DeathTag_06
    DeathTypes = NONE +EXTRA_2
    CreationList = OCL_TopolMTransition
    TransferPreviousHealth = Yes
  End

;Radiation
  Behavior = SlowDeathBehavior DeathTag_07
    DeathTypes = NONE +EXTRA_8
    FX  = INITIAL FX_VehicleRadiationDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Poison
  Behavior = SlowDeathBehavior DeathTag_08
    DeathTypes = NONE +POISONED
    FX  = INITIAL FX_VehiclePoisonDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;PoisonBeta
    Behavior = SlowDeathBehavior DeathTag_09
    DeathTypes = NONE +POISONED_BETA
    FX  = INITIAL FX_VehiclePoisonBetaDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End

;Stealth-------------------------------------------------------------
;---------------------------------------------------------------------

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData2
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  
;  Behavior = TransitionDamageFX ModuleTag_08
;    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
;    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
;  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

;----------------------------------------RIDER LOGIC----------------------------------------

  Behavior = RiderChangeContain ModuleTag_Missile01
    Rider1 = SS27UnArmedRider       RIDER1 WEAPON_RIDER1 STATUS_RIDER1 SS27DeployCommandSet SET_NORMAL
    Rider2 = SS27ArmedRider         RIDER2 WEAPON_RIDER2 STATUS_RIDER2 SS27ArmedCommandSet SET_NORMAL
    Rider3 = SAMUNArmedRider RIDER3 WEAPON_RIDER3 STATUS_RIDER3 SS27DeployCommandSet SET_NORMAL
    ScuttleDelay          = 1
    ScuttleStatus         = TOPPLED
    Slots                 = 1
    InitialPayload        = SS27UnArmedRider 1
    BurnedDeathToUnits    = No    ; And no Burned death.
    AllowInsideKindOf     = PRELOAD
  End
  
  Behavior = ObjectCreationUpgrade ModuleTag_Missile02
    UpgradeObject = OCL_SS27SwitchToArmed
    TriggeredBy   = Upgrade_BuyMissile
  End

;----------------------------------END OF RIDER LOGIC------------------------------------------------


  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = GrantUpgradeCreate ModuleTag_12
   UpgradeToGrant = Upgrade_AmericaScoutDrone
  End

  Behavior = FireWeaponCollide ModuleTag_13
    CollideWeapon  = TopolMKillObjectWeapon2
    RequiredStatus = STATUS_RIDER3
  End

  Behavior = FireWeaponCollide ModuleTag_14
    CollideWeapon  = TopolMAttackSoundWeapon
    RequiredStatus = IS_FIRING_WEAPON DEPLOYED
  End

  Behavior = FireWeaponUpdate ModuleTag_15
    Weapon = CollisionObjectWeapon
  End

  Behavior    = OCLSpecialPower SpecialPower_01
    SpecialPowerTemplate = TopolMGroundAttack
    OCL                  = SUPERWEAPON_TopolMSingleMirv
    StartsPaused = Yes
  End

  Behavior    = UnpauseSpecialPowerUpgrade SpecialPower_02
    TriggeredBy = Upgrade_BuyMissile
    SpecialPowerTemplate = TopolMGroundAttack
    RequiresAllTriggers = Yes
  End

  Behavior    = OCLSpecialPower SpecialPower_03
    SpecialPowerTemplate = TopolMGroundAttack2
    OCL                  = SUPERWEAPON_TopolMMultipleMirv
    StartsPaused = Yes
  End

  Behavior    = UnpauseSpecialPowerUpgrade SpecialPower_04
    TriggeredBy = Upgrade_BuyMissile Upgrade_RUSSIA_MirvTechnology
    SpecialPowerTemplate = TopolMGroundAttack2
    RequiresAllTriggers = Yes
  End

  Behavior = StealthUpdate ModuleStealth_GPSScramblerGenericStealthModule
    StealthDelay                = 2000 ; msec
    InnateStealth               = Yes
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    RequiredStatus = REASSIGN_PARKING
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_IronCrutain
    StartsActive = Yes
    ReactionWeaponPristine = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    DamageTypes = NONE +WATER
  End


  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_Suicide01
    StartsActive = Yes
    ReactionWeaponPristine = TopolMReactionWeapon2
    ReactionWeaponDamaged = TopolMReactionWeapon2
    ReactionWeaponReallyDamaged = TopolMReactionWeapon2
    ReactionWeaponRubble = TopolMReactionWeapon2
    ReactionWeaponDamaged = TopolMReactionWeapon2
    ReactionWeaponReallyDamaged = TopolMReactionWeapon2
    ReactionWeaponRubble = TopolMReactionWeapon2
    DamageTypes = NONE +UNRESISTABLE
  End

  Geometry = BOX
  GeometryMajorRadius = 38.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 15.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   
End



Object Russia_VehicleTopolMArmed

  ; *** ART Parameters ***
  SelectPortrait         = SS-27ic_L
  ButtonImage            = SS-27ic_L
  
  UpgradeCameo1 = Upgrade_BuyMissile
  UpgradeCameo2 = Upgrade_LightVehicleArmor
  UpgradeCameo3 = Upgrade_RUSSIA_MirvTechnology

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = SECONDARY TERTIARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode                   = ONCE_BACKWARDS
      Turret = TURRET
      ;TurretPitch = TURRETEL
      Flags                           = START_FRAME_FIRST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      ;HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End
      
    ConditionState                    = REALLYDAMAGED
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode                   = ONCE_BACKWARDS
      Turret                          = TURRET
      Flags                           = START_FRAME_FIRST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      ;HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState                    = RUBBLE
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode                   = ONCE_BACKWARDS
      Turret                          = TURRET
      Flags                           = START_FRAME_FIRST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      ;HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = RU-SS-27D
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = RU-SS-27D
    End

    ConditionState  = FIRING_B
      Model                           = RU-SS-27D
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = RU-SS-27D
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
        Model                           = RU-SS-27D
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = RU-SS-27D
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
      Model                           = RU-SS-27D
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
      Model                           = RU-SS-27D
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
        Model                           = RU-SS-27D
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
      Model                           = RU-SS-27D
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftRearTireBone      = Tire07
    RightRearTireBone     = Tire05
    MidLeftRearTireBone   = Tire08
    MidRightRearTireBone  = Tire06

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.

  End





  Draw = W3DTruckDraw ModuleTag_02
  
    ConditionState = NONE
      Model = RU-SS-27W
    End
    
    ConditionState = REALLYDAMAGED
      Model = RU-SS-27WDM
    End
    AliasConditionState = RUBBLE


    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Model = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Model = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
        Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
        Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
        Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
        Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
        Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07
    


    TireRotationMultiplier = 0.2
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SS27
  Side = Russia
  EditorSorting   = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost       = 1200
  BuildTime       = 25.0          ;in seconds    
  VisionRange     = 200
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None
    Weapon            = PRIMARY TopolMDeploybweapon
    AutoChooseSources = PRIMARY  NONE
    Weapon            = SECONDARY SS27_MissileWeapon
    AutoChooseSources = SECONDARY NONE
    ;Weapon            = TERTIARY SS27_MissileWeapon2
    ;AutoChooseSources = TERTIARY NONE
    ShareWeaponReloadTime = Yes
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon            = PRIMARY TopolMDeploybweapon
    AutoChooseSources = PRIMARY  NONE
    Weapon            = SECONDARY SS27_MissileWeapon
    AutoChooseSources = SECONDARY NONE
    Weapon            = TERTIARY SS27_MissileWeapon2
    AutoChooseSources = TERTIARY NONE
    ShareWeaponReloadTime = Yes
  End

  Prerequisites
    Object  = Russia_ProsperityCenter
    Science = SCIENCE_Russia_TopolM
  End
  ExperienceValue         = 250 250 350 600  ;Experience point value at each level
  IsTrainable = No             ;Can gain experience

  ArmorSet
    Conditions      = None
    Armor           = RussiaDeployArmor
    DamageFX        = TruckDamageFX
  End

  ArmorSet
    Conditions            = PLAYER_UPGRADE
    Armor                 = RussiaDeployArmor2
    DamageFX              = TruckDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = SS27DeployCommandSet

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!

  ; *** AUDIO Parameters ***
  VoiceSelect = TopolMVoiceSelect
  VoiceMove = TopolMVoiceMove
  VoiceAttack = TopolMVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate = TopolMVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoopLoud
    VoiceCrush = TomahawkVoiceCrush
    VoiceEnter = TopolMVoiceMove
    VoiceBombard = TopolMVoiceAttack
    Deploy              = TopolDeploy
    Undeploy            = TopolDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = VEHICLE CAN_ATTACK HUGE_VEHICLE PRELOAD SELECTABLE SCORE CAN_CAST_REFLECTIONS CANNOT_RETALIATE
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 550.0
    InitialHealth   = 550.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
     Turret
     TurretTurnRate        = 9999
      RecenterTime          = 999999
     ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
     NaturalTurretAngle    = 0
     InitiallyDisabled     = Yes
  End
    PackTime = 6666
    UnpackTime = 6666
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL TopolMLocomotor
  Locomotor = SET_NORMAL_UPGRADED TopolMLocomotor_UP
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

;Upgrades----------------------------------------------------------
  Behavior = LocomotorSetUpgrade Upgrade_01
    TriggeredBy = Upgrade_BallisticCommandset
  End
  Behavior                = ArmorUpgrade Upgrade_02
    TriggeredBy           = Upgrade_BallisticCommandset
  End
  Behavior = WeaponBonusUpgrade Upgrade_03
    TriggeredBy = Upgrade_Range
  End
  Behavior = ArmorUpgrade Upgrade_05
    TriggeredBy           = Upgrade_LightVehicleArmor
  End
  Behavior = MaxHealthUpgrade Upgrade_06
    TriggeredBy   = Upgrade_LightVehicleArmor
    AddMaxHealth  = 82.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End
  Behavior = WeaponSetUpgrade Upgrade_07
    TriggeredBy = Upgrade_RUSSIA_MirvTechnology
  End
  Behavior = CommandSetUpgrade Upgrade_08
    CommandSet = SS27ArmedCommandSet
    TriggeredBy = Upgrade_RUSSIA_MirvTechnology
  End
;Deaths-------------------------------------------------------------
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes = ALL -EXTRA_2 -CRUSHED -SPLATTED -POISONED -POISONED_BETA -EXTRA_8
    FX  = INITIAL  FX_BigMissileCarrierDeath
    OCL = MIDPOINT OCL_SCUDDebrisFlyoff
    OCL = FINAL    OCL_SS27Debris
  End
      ; A crushing defeat
  Behavior = FXListDie DeathTag_02
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie DeathTag_03
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_T90_CrushEffect
  End
  Behavior = DestroyDie DeathTag_04
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = SlowDeathBehavior DeathTag_05
    DeathTypes = NONE +EXTRA_2
    FX  = FINAL    None
  End
  Behavior = CreateObjectDie DeathTag_06
    DeathTypes = NONE +EXTRA_2
    CreationList = OCL_TopolMTransition
    TransferPreviousHealth = Yes
  End

;Radiation
  Behavior = SlowDeathBehavior DeathTag_07
    DeathTypes = NONE +EXTRA_8
    FX  = INITIAL FX_VehicleRadiationDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Poison
  Behavior = SlowDeathBehavior DeathTag_08
    DeathTypes = NONE +POISONED
    FX  = INITIAL FX_VehiclePoisonDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;PoisonBeta
    Behavior = SlowDeathBehavior DeathTag_09
    DeathTypes = NONE +POISONED_BETA
    FX  = INITIAL FX_VehiclePoisonBetaDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End

;Stealth-------------------------------------------------------------
;---------------------------------------------------------------------

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData2
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  
;  Behavior = TransitionDamageFX ModuleTag_08
;    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
;    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
;  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = FireWeaponCollide ModuleTag_13
    CollideWeapon  = TopolMKillObjectWeapon2
    RequiredStatus = USING_ABILITY
  End

  Behavior = FireWeaponCollide ModuleTag_14
    CollideWeapon  = TopolMAttackSoundWeapon
    RequiredStatus = IS_FIRING_WEAPON DEPLOYED
  End

  Behavior = FireWeaponUpdate ModuleTag_15
    Weapon = CollisionObjectWeapon
  End

  Behavior = StealthUpdate ModuleStealth_GPSScramblerGenericStealthModule
    StealthDelay                = 2000 ; msec
    InnateStealth               = Yes
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    RequiredStatus = REASSIGN_PARKING
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_IronCrutain
    StartsActive = Yes
    ReactionWeaponPristine = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    DamageTypes = NONE +WATER
  End

  Geometry = BOX
  GeometryMajorRadius = 38.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 15.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   
End


Object Russia_VehicleTopolMTransition

  ; *** ART Parameters ***
  SelectPortrait         = SS-27ic_L
  ButtonImage            = SS-27ic_L
  
  UpgradeCameo1 = Upgrade_BuyMissile
  UpgradeCameo2 = Upgrade_LightVehicleArmor
  UpgradeCameo3 = Upgrade_RUSSIA_MirvTechnology

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = SECONDARY TERTIARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode                   = ONCE_BACKWARDS
      Flags                           = START_FRAME_LAST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End
      
    ConditionState                    = REALLYDAMAGED
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode                   = ONCE_BACKWARDS
      Flags                           = START_FRAME_LAST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState                    = RUBBLE
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode                   = ONCE_BACKWARDS
      Flags                           = START_FRAME_LAST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End
  End





  Draw = W3DTruckDraw ModuleTag_02
  
    ConditionState = NONE
      Model = RU-SS-27W
    End
    
    ConditionState = REALLYDAMAGED
      Model = RU-SS-27WDM
    End
    AliasConditionState = RUBBLE
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SS27
  Side = Russia
  EditorSorting   = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost       = 1200
  BuildTime       = 25.0          ;in seconds    
  VisionRange     = 200
  ShroudClearingRange = 200

  Prerequisites
    Object  = Russia_ProsperityCenter
    Science = SCIENCE_Russia_TopolM
  End
  ExperienceValue         = 250 250 350 600  ;Experience point value at each level
  IsTrainable = No             ;Can gain experience

  ArmorSet
    Conditions      = None
    Armor           = RussiaDeployArmor
    DamageFX        = TruckDamageFX
  End

  ArmorSet
    Conditions            = PLAYER_UPGRADE
    Armor                 = RussiaDeployArmor2
    DamageFX              = TruckDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = SS27ArmedCommandSet

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!

  ; *** AUDIO Parameters ***
  VoiceSelect = TopolMVoiceSelect
  VoiceMove = TopolMVoiceMove
  VoiceAttack = TopolMVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate = TopolMVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoopLoud
    VoiceCrush = TomahawkVoiceCrush
    VoiceEnter = TopolMVoiceMove
    VoiceBombard = TopolMVoiceAttack
    Deploy              = TopolDeploy
    Undeploy            = TopolDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = VEHICLE HUGE_VEHICLE PRELOAD SCORE CAN_CAST_REFLECTIONS CANNOT_RETALIATE NO_SELECT
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 550.0
    InitialHealth   = 550.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
     Turret
     TurretTurnRate        = 9999
     RecenterTime          = 1        ; how long to wait during idle before recentering
     ControlledWeaponSlots = SECONDARY TERTIARY
     NaturalTurretAngle    = 0
     InitiallyDisabled     = Yes
  End
    PackTime = 6666
    UnpackTime = 6666
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL TopolMLocomotor
  Locomotor = SET_NORMAL_UPGRADED TopolMLocomotor_UP
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

;Upgrades----------------------------------------------------------
  Behavior = LocomotorSetUpgrade Upgrade_01
    TriggeredBy = Upgrade_BallisticCommandset
  End
  Behavior                = ArmorUpgrade Upgrade_02
    TriggeredBy           = Upgrade_BallisticCommandset
  End
  Behavior = ObjectCreationUpgrade Upgrade_03
    UpgradeObject = OCL_NukeEarlyWarningObject
    TriggeredBy   = Upgrade_AmericaScoutDrone
    RequiresAllTriggers = Yes
  End
  Behavior = ArmorUpgrade Upgrade_05
    TriggeredBy           = Upgrade_LightVehicleArmor
  End
  Behavior = MaxHealthUpgrade Upgrade_06
    TriggeredBy   = Upgrade_LightVehicleArmor
    AddMaxHealth  = 82.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End
;Deaths-------------------------------------------------------------
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes = ALL -EXTRA_2 -CRUSHED -SPLATTED -POISONED -POISONED_BETA -EXTRA_8
    FX  = INITIAL  FX_BigMissileCarrierDeath
    OCL = MIDPOINT OCL_SCUDDebrisFlyoff
    OCL = FINAL    OCL_SS27Debris
  End
      ; A crushing defeat
  Behavior = FXListDie DeathTag_02
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie DeathTag_03
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_T90_CrushEffect
  End
  Behavior = DestroyDie DeathTag_04
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = SlowDeathBehavior DeathTag_05
    DeathTypes = NONE +EXTRA_2
    FX  = FINAL    None
  End
  Behavior = CreateObjectDie DeathTag_06
    DeathTypes = NONE +EXTRA_2
    CreationList = OCL_TopolMPacked
    TransferPreviousHealth = Yes
  End

;Radiation
  Behavior = SlowDeathBehavior DeathTag_07
    DeathTypes = NONE +EXTRA_8
    FX  = INITIAL FX_VehicleRadiationDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Poison
  Behavior = SlowDeathBehavior DeathTag_08
    DeathTypes = NONE +POISONED
    FX  = INITIAL FX_VehiclePoisonDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;PoisonBeta
    Behavior = SlowDeathBehavior DeathTag_09
    DeathTypes = NONE +POISONED_BETA
    FX  = INITIAL FX_VehiclePoisonBetaDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End

;Stealth-------------------------------------------------------------
;---------------------------------------------------------------------

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData2
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  
;  Behavior = TransitionDamageFX ModuleTag_08
;    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
;    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
;  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = GrantUpgradeCreate ModuleTag_12
   UpgradeToGrant = Upgrade_AmericaScoutDrone
  End

  Behavior = FireWeaponUpdate ModuleTag_13
    Weapon = TopolMKillObjectWeapon2
    InitialDelay = 6666
  End

  Behavior = StealthUpdate ModuleStealth_GPSScramblerGenericStealthModule
    StealthDelay                = 2000 ; msec
    InnateStealth               = Yes
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    RequiredStatus = REASSIGN_PARKING
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_IronCrutain
    StartsActive = Yes
    ReactionWeaponPristine = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    DamageTypes = NONE +WATER
  End

  Geometry = BOX
  GeometryMajorRadius = 38.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 15.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   
End

Object MirvtargetDecalReveal

  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      Model               = MarkerSkin
    End
  End

  ; ***DESIGN parameters ***
  Side = Russia
  EditorSorting       = INFANTRY
  TransportSlotCount = 1
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor
  End

  VisionRange         = 9999.0 
  ShroudClearingRange = 100

  ; *** ENGINEERING Parameters ***
RadarPriority = NOT_ON_RADAR
  KindOf = INERT
  Body = ActiveBody ModuleTag_02
    MaxHealth        = 9999.0
    InitialHealth    = 9999.0
  End

 Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = DeletionUpdate ModuleTag_04
    MinLifetime = 35000
    MaxLifetime = 35000
  End

  Geometry            = BOX
  GeometryMajorRadius  = 1.0
  GeometryMinorRadius  = 1.0
  GeometryHeight      = 1.0
  GeometryIsSmall     = Yes
  ;ShadowSizeX = 200;
  ;ShadowSizeY = 200;
  ;ShadowTexture = SCCNMarker
End

;------------------------------------------------------------------------------
Object MirvtargetLaser

  Draw                    = W3DDependencyModelDraw ModuleTag_01
    AttachToBoneInContainer = Rotate
    DefaultConditionState
      Model               = RedPointLaser
    End
  End

  ; ***DESIGN parameters ***
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor
  End

  ; *** ENGINEERING Parameters ***
  KindOf            =  CLICK_THROUGH UNATTACKABLE INERT
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 9999.0
    InitialHealth   = 9999.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
  End

  Behavior             = DestroyDie DeathTag_01
  End

  Behavior = DeletionUpdate ModuleTag_04
    MinLifetime = 750
    MaxLifetime = 750
  End

End

;------------------------------------------------------------------------------
Object MirvtargetLaserAir

  Draw                    = W3DDependencyModelDraw ModuleTag_01
    AttachToBoneInContainer = Rotate
    DefaultConditionState
      Model               = RedPointLaser2
    End
  End

  ; ***DESIGN parameters ***
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor
  End

  ; *** ENGINEERING Parameters ***
  KindOf            =  CLICK_THROUGH UNATTACKABLE INERT
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 9999.0
    InitialHealth   = 9999.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
  End

  Behavior             = DestroyDie DeathTag_01
  End

  Behavior = DeletionUpdate ModuleTag_04
    MinLifetime = 600
    MaxLifetime = 600
  End

End


Object TopolMUpload

  ; *** ART Parameters ***

  SelectPortrait         = TopolUpgrade-ic
  ButtonImage            = TopolUpgrade-ic

  ; ------------ the main factory itself -----------------
  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day

    DefaultConditionState
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
      AnimationMode = ONCE
    End
    ConditionState    = DAMAGED
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End

    ConditionState    = NIGHT
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
    ConditionState = DAMAGED NIGHT
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
    
    ConditionState    = NIGHT SNOW
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
         
    ConditionState    = SNOW
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
    ConditionState = DAMAGED SNOW
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model           = RU-TopolUpgrade
      Animation     = RU-TopolUpgrade.RU-TopolUpgrade
    End
  End

  PlacementViewAngle = -44

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TopolUpgrade
  Side = Russia
  EditorSorting    = STRUCTURE
  Prerequisites
   ;None
  End
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  ;VoiceSelect = 
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundAmbient          = UnderConstructionLoop
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = SELECTABLE PRELOAD
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 750.0
    InitialHealth   = 750.0
  End

  Behavior = DestroyDie DeathTag_01
    ;nothing
  End
  Behavior             = CreateObjectDie DeathTag_02
    DeathTypes = NONE +EXTRA_3
    CreationList  = OCL_TopolUpgrade
    TransferPreviousHealth = Yes
  End

  Behavior = FXListDie DeathTag_03
    DeathTypes = ALL
   ; DeathFX = 
  End

  Behavior          = PhysicsBehavior ModuleTag_03
    Mass            = 60.0
;Navy Boat Do not Shockwawe!!
    ShockMaxRoll = 0.0001
    ShockMaxPitch = 0.0001
    ShockMaxYaw = 0.0001
    ShockResistance = 0.0001
  End
  Behavior = TransportAIUpdate ModuleTag_04
    ;<NO DATA>
  End
  Locomotor         = SET_NORMAL ShipYardLocomotor

  Behavior = FlammableUpdate ModuleTag_05
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior  = FXListDie DeathTag_04
    DeathTypes = ALL -EXTRA_3
    DeathFX = FX_StructureMediumDeath
  End

  Behavior             = CreateObjectDie DeathTag_05
    DeathTypes = ALL -EXTRA_3
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior = TransitionDamageFX ModuleTag_06
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = FireWeaponUpdate ModuleTag_07
      Weapon               = NavalDieWeapon
      InitialDelay         = 36500
  End

  Geometry            = BOX
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 50.0
  GeometryIsSmall     = Yes
  FactoryExitWidth    = 0    ; How much space to leave for units exiting.
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object TopolMTargetObject

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      Model = TargetAAbox
    End
  End

  ; ***DESIGN parameters ***
  EditorSorting   = VEHICLE
  ;DisplayName      = GUI:SuperweaponTopolStrike

  ArmorSet
    Conditions      = None
    Armor           = MirvAttackableObject
    DamageFX        = EmptyDamageFX
  End

  ;ShroudRevealToAllRange = 80  ; Reveals shroud to all players at a specific amount which can be different. 

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = CAN_ATTACK VEHICLE NO_COLLIDE
  Body            = ActiveBody ModuleTag_02
    MaxHealth     = 1.0
    InitialHealth = 1.0
  End

  Behavior             = DestroyDie DeathTag_01
    ;nothing
  End

  Behavior = AIUpdateInterface ModuleTag_03
    ForbidPlayerCommands =  Yes
  End

  Behavior = LifetimeUpdate ModuleTag_04
    MinLifetime = 15000  ; min lifetime in msec
    MaxLifetime = 15000   ; max lifetime in msec
  End

  Behavior = FireWeaponUpdate ModuleTag_NoAttack
    Weapon = TopolTargetMaskWeapon
    ExclusiveWeaponDelay = 3000
  End
  
  Geometry            = BOX
  GeometryMajorRadius = 10.0
  GeometryHeight      = 10.0
  GeometryIsSmall     = Yes
End

Object Nuke_RadiationFieldSmall

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      Model = NONE
    End
  End

  ; ***DESIGN parameters ***
  EditorSorting = SYSTEM
  KindOf = IMMOBILE CLEANUP_HAZARD INERT NO_COLLIDE STICK_TO_TERRAIN_SLOPE
  ArmorSet
    Conditions      = None
    Armor           = HazardousMaterialArmor
  End

  ; ***AUDIO parameters ***
  SoundAmbient      = RadiationPoolAmbientLoop

  ; *** ENGINEERING Parameters ***
  Body = ActiveBody ModuleTag_02
    MaxHealth        = 100.0
    InitialHealth    = 100.0
  End
  Behavior = FireWeaponUpdate ModuleTag_03
    Weapon = Nuke_SmallRadiationFieldWeapon
  End

  Behavior = LifetimeUpdate ModuleTag_04
    MinLifetime = 2500
    MaxLifetime = 2500
  End
  
  Behavior = FireWeaponUpdate ModuleTag_05
    Weapon = HazardFieldCoreWeapon ; Prevents stacking of fields with a small blast of cleaning at the core at startup
  End

  Behavior = DestroyDie DeathTag_01
  End

  Behavior = FXListDie DeathTag_02
    DeathFX = FX_RadiationPoolDie
  End
  
  Geometry            = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryHeight      = 1.0
  GeometryIsSmall     = No
  
End

Object Russia_VehicleTopolMAI

  ; *** ART Parameters ***
  SelectPortrait         = SS-27ic_L
  ButtonImage            = SS-27ic_L
  
  UpgradeCameo1 = Upgrade_BuyMissile
  UpgradeCameo2 = Upgrade_LightVehicleArmor
  ;UpgradeCameo3 = Upgrade_RUSSIA_MirvTechnology

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = SECONDARY TERTIARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode                   = ONCE_BACKWARDS
      Turret = TURRET
      ;TurretPitch = TURRETEL
      Flags                           = START_FRAME_FIRST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      ;HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End
      
    ConditionState                    = RUBBLE
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode                   = ONCE_BACKWARDS
      Turret                          = TURRET
      Flags                           = START_FRAME_FIRST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      ;HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = RU-SS-27
      Animation                       = RU-SS-27.RU-SS-27
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = RU-SS-27DM
      Animation                       = RU-SS-27DM.RU-SS-27DM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = RU-SS-27D
      Animation                       = RU-SS-27D.RU-SS-27D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = RU-SS-27D_DM
      Animation                       = RU-SS-27D_DM.RU-SS-27D_DM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = RU-SS-27D
      Animation                       = RU-SS-27D.RU-SS-27D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = RU-SS-27D
      Animation                       = RU-SS-27D.RU-SS-27D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
        Model                           = RU-SS-27D_DM
      Animation                       = RU-SS-27D_DM.RU-SS-27D_DM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = RU-SS-27D_DM
      Animation                       = RU-SS-27D_DM.RU-SS-27D_DM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
      Model                           = RU-SS-27D
      Animation                       = RU-SS-27D.RU-SS-27D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
      Model                           = RU-SS-27D
      Animation                       = RU-SS-27D.RU-SS-27D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
        Model                           = RU-SS-27D_DM
      Animation                       = RU-SS-27D_DM.RU-SS-27D_DM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
      Model                           = RU-SS-27D_DM
      Animation                       = RU-SS-27D_DM.RU-SS-27D_DM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftRearTireBone      = Tire07
    RightRearTireBone     = Tire05
    MidLeftRearTireBone   = Tire08
    MidRightRearTireBone  = Tire06

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.

  End





  Draw = W3DTruckDraw ModuleTag_02
  
    ConditionState = NONE
      Model = RU-SS-27W
    End
    
    ConditionState = REALLYDAMAGED
      Model = RU-SS-27WDM
    End
    AliasConditionState = RUBBLE


    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Model = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Model = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
        Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
        Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
        Model                           = RU-SS-27W
      Animation                       = RU-SS-27W.RU-SS-27W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
        Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
        Model                           = RU-SS-27WDM
      Animation                       = RU-SS-27WDM.RU-SS-27WDM
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07
    


    TireRotationMultiplier = 0.2
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SS27
  Side = Russia
  EditorSorting   = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost       = 1200
  BuildTime       = 60.0          ;in seconds    
  VisionRange     = 9999
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None
    Weapon            = SECONDARY SS27_MissileWeaponAI
    Weapon            = TERTIARY SS27_MissileWeapon2AI
    ShareWeaponReloadTime = Yes
  End

  Prerequisites
    Object  = Russia_ProsperityCenter
    Science = SCIENCE_Rank4
  End
  ExperienceValue         = 250 250 350 600  ;Experience point value at each level
  IsTrainable = No             ;Can gain experience

  ArmorSet
    Conditions      = None
    Armor           = RussiaArtilleryArmor
    DamageFX        = TruckDamageFX
  End

  ArmorSet
    Conditions            = PLAYER_UPGRADE
    Armor                 = RussiaArtilleryArmor2
    DamageFX              = TruckDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = SS27ArmedCommandSet

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!

  ; *** AUDIO Parameters ***
  VoiceSelect = TopolMVoiceSelect
  VoiceMove = TopolMVoiceMove
  VoiceAttack = TopolMVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate = TopolMVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoopLoud
    VoiceCrush = TomahawkVoiceCrush
    VoiceEnter = TopolMVoiceMove
    VoiceBombard = TopolMVoiceAttack
    Deploy              = TopolDeploy
    Undeploy            = TopolDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = VEHICLE CAN_ATTACK HUGE_VEHICLE PRELOAD SELECTABLE SCORE CAN_CAST_REFLECTIONS CANNOT_RETALIATE
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 550.0
    InitialHealth   = 550.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
     Turret
     TurretTurnRate        = 9999
     RecenterTime          = 1        ; how long to wait during idle before recentering
     ControlledWeaponSlots = SECONDARY TERTIARY
     NaturalTurretAngle    = 0
     InitiallyDisabled     = Yes
  End
    PackTime = 6666
    UnpackTime = 6666
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 6666
  End

  Locomotor = SET_NORMAL TopolMLocomotor
  Locomotor = SET_NORMAL_UPGRADED TopolMLocomotor_UP
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

;Upgrades----------------------------------------------------------
  Behavior = LocomotorSetUpgrade Upgrade_01
    TriggeredBy = Upgrade_BallisticCommandset
  End
  Behavior                = ArmorUpgrade Upgrade_02
    TriggeredBy           = Upgrade_BallisticCommandset
  End
  Behavior = WeaponBonusUpgrade Upgrade_03
    TriggeredBy = Upgrade_Range
  End
  Behavior = ObjectCreationUpgrade Upgrade_04
    UpgradeObject = OCL_NukeEarlyWarningObject
    TriggeredBy   = Upgrade_AmericaScoutDrone
    RequiresAllTriggers = Yes
  End
  Behavior = ArmorUpgrade Upgrade_06
    TriggeredBy           = Upgrade_LightVehicleArmor
  End
  Behavior = MaxHealthUpgrade Upgrade_07
    TriggeredBy   = Upgrade_LightVehicleArmor
    AddMaxHealth  = 82.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End
;Deaths-------------------------------------------------------------
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes = ALL
    FX  = INITIAL  FX_BigMissileCarrierDeath
    OCL = MIDPOINT OCL_SCUDDebrisFlyoff
    OCL = FINAL    OCL_SS27Debris
  End
      ; A crushing defeat
  Behavior = FXListDie DeathTag_02
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie DeathTag_03
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_T90_CrushEffect
  End
  Behavior = DestroyDie DeathTag_04
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

;Radiation
  Behavior = SlowDeathBehavior DeathTag_07
    DeathTypes = NONE +EXTRA_8
    FX  = INITIAL FX_VehicleRadiationDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Poison
  Behavior = SlowDeathBehavior DeathTag_08
    DeathTypes = NONE +POISONED
    FX  = INITIAL FX_VehiclePoisonDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;PoisonBeta
    Behavior = SlowDeathBehavior DeathTag_09
    DeathTypes = NONE +POISONED_BETA
    FX  = INITIAL FX_VehiclePoisonBetaDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Stealth-------------------------------------------------------------
;---------------------------------------------------------------------

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData2
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  
  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = GrantUpgradeCreate ModuleTag_12
   UpgradeToGrant = Upgrade_AmericaScoutDrone
  End

  Behavior = StealthUpdate ModuleStealth_GPSScramblerGenericStealthModule
    StealthDelay                = 2000 ; msec
    InnateStealth               = Yes
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    RequiredStatus = REASSIGN_PARKING
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_IronCrutain
    StartsActive = Yes
    ReactionWeaponPristine = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    DamageTypes = NONE +WATER
  End

  Geometry = BOX
  GeometryMajorRadius = 38.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 15.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   
End