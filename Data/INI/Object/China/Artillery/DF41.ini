Object China_VehicleDF41

  ; *** ART Parameters ***
  SelectPortrait         = DF41_ic_L
  ButtonImage            = DF41_ic_L
  
  UpgradeCameo1 = Upgrade_ChinaBuyMissile
  UpgradeCameo2 = Upgrade_LightVehicleArmor

;-----------------------------------------------NEW CODE-------------------------------------------------------------------

  Draw = W3DTruckDraw ModuleTag_01

    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY TERTIARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

   ConditionState       = NONE
      Model                           = NVDF41
      Turret = TURRET
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End
    AliasConditionState = RIDER1
    AliasConditionState = RIDER3


    ConditionState      = RIDER1 UNPACKING
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End

    ConditionState      = RIDER1 PACKING
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End
    
    ConditionState      = RIDER1 DEPLOYED 
      Model                           = NVDF41D
      Turret = TURRET
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
      HideSubObject     = WEAPONA01 HOUSECOLOR07
    End
     AliasConditionState = RIDER1 DEPLOYED PREATTACK_B   
     AliasConditionState = DEPLOYED
    AliasConditionState = RIDER3 DEPLOYED

    
    ;Armed with missile
    
    ConditionState      = RIDER2
      Model                           = NVDF41
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End

    ConditionState      = RIDER2 UNPACKING
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End

    ConditionState      = RIDER2 PACKING
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End
    
    ConditionState      = RIDER2 DEPLOYED 
      Model                           = NVDF41D
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
    
    ConditionState      = RIDER2 DEPLOYED PREATTACK_B
      Model                           = NVDF41D
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
    
    ;Reallydamaged conditions
    
   ConditionState       = RIDER1 REALLYDAMAGED
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode     = ONCE
      Flags             = START_FRAME_LAST
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End
    AliasConditionState = RUBBLE
    AliasConditionState = RIDER1 RUBBLE

    ConditionState      = RIDER1 REALLYDAMAGED UNPACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End

    ConditionState      = RIDER1 REALLYDAMAGED PACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      HideSubObject     = WeaponA01 HOUSECOLOR07
    End
    
    ConditionState      = RIDER1 REALLYDAMAGED DEPLOYED 
      Model                           = NVDF41_D
      HideSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
    
    AliasConditionState = RIDER1 REALLYDAMAGED DEPLOYED PREATTACK_B
    
    ;Armed with missile
    
    ConditionState      = RIDER2 REALLYDAMAGED
      Model                           = NVDF41_D
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End
    AliasConditionState = RIDER2 RUBBLE

    ConditionState      = RIDER2 REALLYDAMAGED UNPACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End

    ConditionState      = RIDER2 REALLYDAMAGED PACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      ShowSubObject     = WeaponA01 HOUSECOLOR07
    End
    
    ConditionState      = RIDER2 REALLYDAMAGED DEPLOYED 
      Model                           = NVDF41D_D
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End
    
    ConditionState      = RIDER2 REALLYDAMAGED DEPLOYED PREATTACK_B
      Model                           = NVDF41D_D
      Turret = TURRET
      ShowSubObject     = WeaponA01 HOUSECOLOR07
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WeaponA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WeaponA
      WeaponFireFXBone                = TERTIARY FIREFX
    End

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftRearTireBone      = Tire07
    RightRearTireBone     = Tire05
    MidLeftRearTireBone   = Tire08
    MidRightRearTireBone  = Tire06

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.
  End

;---------------------------------------END OF NEW CODE-------------------------------------------------------------



  Draw = W3DTruckDraw ModuleTag_02
  
    ConditionState = NONE
      Model = NVDF41_W
    End
    
    ConditionState = REALLYDAMAGED
      Model = NVDF41_WD
    End
    AliasConditionState = RUBBLE


    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Model = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Model = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07
    


    TireRotationMultiplier = 0.2
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:DF41
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost       = 2500
  BuildTime       = 38.0          ;in seconds    
  VisionRange     = 200
  ShroudClearingRange = 200

  WeaponSet
    Conditions = WEAPON_RIDER1
  End

  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon            = PRIMARY TopolMDeploybweapon
    AutoChooseSources = PRIMARY NONE
    Weapon            = TERTIARY DF41MissileWeapon
    AutoChooseSources = TERTIARY NONE
  End

  WeaponSet
    Conditions = WEAPON_RIDER3
  End

  Prerequisites
    Object = ChinaPropagandaCenter
    Object  = DF41BuildObject
  End
  ExperienceValue         = 300 300 600 900  ;Experience point value at each level
  IsTrainable = No             ;Can gain experience

  ArmorSet
    Conditions      = None
    Armor           = TopolMArmor
    DamageFX        = TruckDamageFX
  End

  ArmorSet
    Conditions            = PLAYER_UPGRADE
    Armor                 = TopolMArmor2
    DamageFX              = TruckDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = DF41CommandSetArmed

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!

  ; *** AUDIO Parameters ***
  VoiceSelect           = NukeCannonVoiceSelect
  VoiceMove             = NukeCannonVoiceMove
  VoiceGuard            = NukeCannonVoiceMove
  VoiceAttack           = NukeCannonVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = NukeCannonVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = NukeCannonVoiceMove
    Deploy              = TopolDeploy
    Undeploy            = TopolDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = VEHICLE HUGE_VEHICLE PRELOAD SELECTABLE SCORE CAN_CAST_REFLECTIONS CANNOT_RETALIATE
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 550.0
    InitialHealth   = 550.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
     Turret
     TurretTurnRate        = 9999
     RecenterTime          = 1        ; how long to wait during idle before recentering
     ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
     NaturalTurretAngle    = 0
     InitiallyDisabled     = Yes
  End
    PackTime = 6666
    UnpackTime = 6666
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL DF41Locomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

;Upgrades----------------------------------------------------------
  Behavior = ObjectCreationUpgrade Upgrade_02
    UpgradeObject = OCL_NukeEarlyWarningObject
    TriggeredBy   = Upgrade_AmericaScoutDrone
    RequiresAllTriggers = Yes
  End
  Behavior                = ArmorUpgrade Upgrade_03
    TriggeredBy           = Upgrade_LightVehicleArmor
  End
  Behavior = MaxHealthUpgrade Upgrade_04
    TriggeredBy   = Upgrade_LightVehicleArmor
    AddMaxHealth  = 165.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

;Deaths-------------------------------------------------------------
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes = ALL -EXTRA_2 -CRUSHED -SPLATTED -POISONED -POISONED_BETA -EXTRA_8
    FX  = INITIAL  FX_BigMissileCarrierDeath
    OCL = MIDPOINT OCL_SCUDDebrisFlyoff
    OCL = FINAL    OCL_ChinaDF41Debris
  End
  Behavior = FXListDie DeathTag_02
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_BigMissileCarrierDeath
  End
  Behavior = CreateObjectDie DeathTag_03
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_T90_CrushEffect
  End
  Behavior = DestroyDie DeathTag_04
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = SlowDeathBehavior DeathTag_05
    DeathTypes = NONE +EXTRA_2
    FX  = FINAL    None
  End
  Behavior = CreateObjectDie DeathTag_06
    DeathTypes = NONE +EXTRA_2
    CreationList = OCL_DF41Transition
    TransferPreviousHealth = Yes
  End

;Radiation
  Behavior = SlowDeathBehavior DeathTag_07
    DeathTypes = NONE +EXTRA_8
    FX  = INITIAL FX_VehicleRadiationDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Poison
  Behavior = SlowDeathBehavior DeathTag_08
    DeathTypes = NONE +POISONED
    FX  = INITIAL FX_VehiclePoisonDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;PoisonBeta
    Behavior = SlowDeathBehavior DeathTag_09
    DeathTypes = NONE +POISONED_BETA
    FX  = INITIAL FX_VehiclePoisonBetaDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Stealth-------------------------------------------------------------
;---------------------------------------------------------------------

;----------------------------------------RIDER LOGIC----------------------------------------

  Behavior = RiderChangeContain ModuleTag_Missile01
    Rider1 = SS27UnArmedRider       RIDER1 WEAPON_RIDER1 STATUS_RIDER1 DF41CommandSetArmed SET_NORMAL
    Rider2 = SS27ArmedRider         RIDER2 WEAPON_RIDER2 STATUS_RIDER2 DF41CommandSetArmed SET_NORMAL
    Rider3 = SAMUNArmedRider RIDER3 WEAPON_RIDER3 STATUS_RIDER3 SS27DeployCommandSet SET_NORMAL
    ScuttleDelay          = 1
    ScuttleStatus         = TOPPLED
    Slots                 = 1
    InitialPayload        = SS27UnArmedRider 1
    BurnedDeathToUnits    = No    ; And no Burned death.
    AllowInsideKindOf     = PRELOAD
  End
  
  Behavior = ObjectCreationUpgrade ModuleTag_Missile02
    UpgradeObject = OCL_SS27SwitchToArmed
    TriggeredBy   = Upgrade_ChinaBuyMissile
  End

;----------------------------------END OF RIDER LOGIC------------------------------------------------


  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData2
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = GrantUpgradeCreate ModuleTag_11
   UpgradeToGrant = Upgrade_AmericaScoutDrone
  End

  Behavior = FireWeaponCollide ModuleTag_13
    CollideWeapon  = TopolMKillObjectWeapon2
    RequiredStatus = STATUS_RIDER3 
  End

  Behavior = FireWeaponCollide ModuleTag_14
    CollideWeapon  = DF41AttackSoundWeapon
    RequiredStatus = IS_FIRING_WEAPON DEPLOYED
  End

  Behavior = FireWeaponUpdate ModuleTag_15
    Weapon = CollisionObjectWeapon
  End

  Behavior    = OCLSpecialPower SpecialPower_01
    SpecialPowerTemplate = DF41GroundAttack
    OCL                  = SUPERWEAPON_TopolMMultipleMirv
    StartsPaused = Yes
  End

  Behavior    = UnpauseSpecialPowerUpgrade SpecialPower_02
    TriggeredBy = Upgrade_ChinaBuyMissile
    SpecialPowerTemplate = DF41GroundAttack
    RequiresAllTriggers = Yes
  End

  Behavior = StealthUpdate ModuleStealth_GPSScramblerGenericStealthModule
    StealthDelay                = 2000 ; msec
    InnateStealth               = Yes
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    RequiredStatus = REASSIGN_PARKING
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_IronCrutain
    StartsActive = Yes
    ReactionWeaponPristine = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    DamageTypes = NONE +WATER
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_Suicide01
    StartsActive = Yes
    ReactionWeaponPristine = TopolMReactionWeapon2
    ReactionWeaponDamaged = TopolMReactionWeapon2
    ReactionWeaponReallyDamaged = TopolMReactionWeapon2
    ReactionWeaponRubble = TopolMReactionWeapon2
    ReactionWeaponDamaged = TopolMReactionWeapon2
    ReactionWeaponReallyDamaged = TopolMReactionWeapon2
    ReactionWeaponRubble = TopolMReactionWeapon2
    DamageTypes = NONE +UNRESISTABLE
  End

  Geometry = BOX
  GeometryMajorRadius = 38.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 15.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   
End

Object China_VehicleDF41Armed

  ; *** ART Parameters ***
  SelectPortrait         = DF41_ic_L
  ButtonImage            = DF41_ic_L
  
  UpgradeCameo1 = Upgrade_ChinaBuyMissile
  UpgradeCameo2 = Upgrade_LightVehicleArmor

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = PRIMARY SECONDARY TERTIARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode                   = ONCE_BACKWARDS
      Turret = TURRET
      ;TurretPitch = TURRETEL
      Flags                           = START_FRAME_FIRST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      ;HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End
      
    ConditionState                    = RUBBLE
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode                   = ONCE_BACKWARDS
      Turret                          = TURRET
      Flags                           = START_FRAME_FIRST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      ;HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation                       = NVDF41.NVDF41
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation                       = NVDF41.NVDF41
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftRearTireBone      = Tire07
    RightRearTireBone     = Tire05
    MidLeftRearTireBone   = Tire08
    MidRightRearTireBone  = Tire06

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DTruckDraw ModuleTag_02
  
    ConditionState = NONE
      Model = NVDF41_W
    End
    
    ConditionState = REALLYDAMAGED
      Model = NVDF41_WD
    End
    AliasConditionState = RUBBLE


    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Model = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Model = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07
    


    TireRotationMultiplier = 0.2
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:DF41
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost       = 1200
  BuildTime       = 25.0          ;in seconds    
  VisionRange     = 250
  ShroudClearingRange = 250

  WeaponSet
    Weapon            = PRIMARY TopolMDeploybweapon
    AutoChooseSources = PRIMARY  NONE
    Weapon            = SECONDARY DF41MissileWeapon
    AutoChooseSources = SECONDARY NONE
    ShareWeaponReloadTime = Yes
  End

  Prerequisites
    Object = ChinaPropagandaCenter
    Object  = DF41BuildObject
  End
  ExperienceValue         = 250 250 350 600  ;Experience point value at each level
  IsTrainable = No             ;Can gain experience

  ArmorSet
    Conditions      = None
    Armor           = TopolMArmor
    DamageFX        = TruckDamageFX
  End

  ArmorSet
    Conditions            = PLAYER_UPGRADE
    Armor                 = TopolMArmor2
    DamageFX              = TruckDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = DF41CommandSetArmed

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!

  ; *** AUDIO Parameters ***
  VoiceSelect           = NukeCannonVoiceSelect
  VoiceMove             = NukeCannonVoiceMove
  VoiceGuard            = NukeCannonVoiceMove
  VoiceAttack           = NukeCannonVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = NukeCannonVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = NukeCannonVoiceMove
    Deploy              = TopolDeploy
    Undeploy            = TopolDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = VEHICLE HUGE_VEHICLE PRELOAD SELECTABLE SCORE CAN_CAST_REFLECTIONS CANNOT_RETALIATE
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 550.0
    InitialHealth   = 550.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
     Turret
     TurretTurnRate        = 9999
     RecenterTime          = 1        ; how long to wait during idle before recentering
     ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
     NaturalTurretAngle    = 0
     InitiallyDisabled     = Yes
  End
    PackTime = 6666
    UnpackTime = 6666
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL DF41Locomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

;Upgrades----------------------------------------------------------
  Behavior                = ArmorUpgrade Upgrade_02
    TriggeredBy           = Upgrade_LightVehicleArmor
  End
  Behavior = MaxHealthUpgrade Upgrade_03
    TriggeredBy   = Upgrade_LightVehicleArmor
    AddMaxHealth  = 165.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

;Deaths-------------------------------------------------------------
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes = ALL -EXTRA_2 -CRUSHED -SPLATTED -POISONED -POISONED_BETA -EXTRA_8
    FX  = INITIAL  FX_BigMissileCarrierDeath
    OCL = MIDPOINT OCL_SCUDDebrisFlyoff
    OCL = FINAL    OCL_ChinaDF41Debris
  End
  Behavior = FXListDie DeathTag_02
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_BigMissileCarrierDeath
  End
  Behavior = CreateObjectDie DeathTag_03
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_T90_CrushEffect
  End
  Behavior = DestroyDie DeathTag_04
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = SlowDeathBehavior DeathTag_05
    DeathTypes = NONE +EXTRA_2
    FX  = FINAL    None
  End
  Behavior = CreateObjectDie DeathTag_06
    DeathTypes = NONE +EXTRA_2
    CreationList = OCL_DF41Transition
    TransferPreviousHealth = Yes
  End

;Radiation
  Behavior = SlowDeathBehavior DeathTag_07
    DeathTypes = NONE +EXTRA_8
    FX  = INITIAL FX_VehicleRadiationDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Poison
  Behavior = SlowDeathBehavior DeathTag_08
    DeathTypes = NONE +POISONED
    FX  = INITIAL FX_VehiclePoisonDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;PoisonBeta
    Behavior = SlowDeathBehavior DeathTag_09
    DeathTypes = NONE +POISONED_BETA
    FX  = INITIAL FX_VehiclePoisonBetaDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Stealth-------------------------------------------------------------
;---------------------------------------------------------------------

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData2
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = FireWeaponCollide ModuleTag_13
    CollideWeapon  = TopolMKillObjectWeapon2
    RequiredStatus = USING_ABILITY
  End

  Behavior = StealthUpdate ModuleStealth_GPSScramblerGenericStealthModule
    StealthDelay                = 2000 ; msec
    InnateStealth               = Yes
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    RequiredStatus = REASSIGN_PARKING
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_IronCrutain
    StartsActive = Yes
    ReactionWeaponPristine = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    DamageTypes = NONE +WATER
  End

  Geometry = BOX
  GeometryMajorRadius = 38.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 15.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   
End

Object China_VehicleDF41Transition

  ; *** ART Parameters ***
  SelectPortrait         = DF41_ic_L
  ButtonImage            = DF41_ic_L
  
  UpgradeCameo1 = Upgrade_ChinaBuyMissile
  UpgradeCameo2 = Upgrade_LightVehicleArmor

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = SECONDARY TERTIARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode                   = ONCE_BACKWARDS
      Turret = TURRET
      ;TurretPitch = TURRETEL
      Flags                           = START_FRAME_LAST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End
      
    ConditionState                    = RUBBLE
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode                   = ONCE_BACKWARDS
      Turret                          = TURRET
      Flags                           = START_FRAME_LAST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation                       = NVDF41.NVDF41
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation                       = NVDF41.NVDF41
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftRearTireBone      = Tire07
    RightRearTireBone     = Tire05
    MidLeftRearTireBone   = Tire08
    MidRightRearTireBone  = Tire06

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DTruckDraw ModuleTag_02
  
    ConditionState = NONE
      Model = NVDF41_W
    End
    
    ConditionState = REALLYDAMAGED
      Model = NVDF41_WD
    End
    AliasConditionState = RUBBLE


    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Model = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Model = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07
    


    TireRotationMultiplier = 0.2
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:DF41
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost       = 1200
  BuildTime       = 25.0          ;in seconds    
  VisionRange     = 250
  ShroudClearingRange = 250

  Prerequisites
    Object = ChinaPropagandaCenter
    Object  = DF41BuildObject
  End
  ExperienceValue         = 250 250 350 600  ;Experience point value at each level
  IsTrainable = No             ;Can gain experience

  ArmorSet
    Conditions      = None
    Armor           = TopolMArmor
    DamageFX        = TruckDamageFX
  End

  ArmorSet
    Conditions            = PLAYER_UPGRADE
    Armor                 = TopolMArmor2
    DamageFX              = TruckDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = DF41CommandSet

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!

  ; *** AUDIO Parameters ***
  VoiceSelect           = NukeCannonVoiceSelect
  VoiceMove             = NukeCannonVoiceMove
  VoiceGuard            = NukeCannonVoiceMove
  VoiceAttack           = NukeCannonVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = NukeCannonVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = NukeCannonVoiceMove
    Deploy              = TopolDeploy
    Undeploy            = TopolDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = VEHICLE HUGE_VEHICLE PRELOAD NO_SELECT SCORE CAN_CAST_REFLECTIONS CANNOT_RETALIATE
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 550.0
    InitialHealth   = 550.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
     Turret
     TurretTurnRate        = 9999
     RecenterTime          = 1        ; how long to wait during idle before recentering
     ControlledWeaponSlots = SECONDARY TERTIARY
     NaturalTurretAngle    = 0
     InitiallyDisabled     = Yes
  End
    PackTime = 6666
    UnpackTime = 6666
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL DF41Locomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

;Upgrades----------------------------------------------------------
  Behavior                = ArmorUpgrade Upgrade_03
    TriggeredBy           = Upgrade_LightVehicleArmor
  End
  Behavior = MaxHealthUpgrade Upgrade_04
    TriggeredBy   = Upgrade_LightVehicleArmor
    AddMaxHealth  = 165.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End


;Deaths-------------------------------------------------------------
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes = ALL -EXTRA_2 -CRUSHED -SPLATTED -POISONED -POISONED_BETA -EXTRA_8
    FX  = INITIAL  FX_BigMissileCarrierDeath
    OCL = MIDPOINT OCL_SCUDDebrisFlyoff
    OCL = FINAL    OCL_ChinaDF41Debris
  End
  Behavior = FXListDie DeathTag_02
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_BigMissileCarrierDeath
  End
  Behavior = CreateObjectDie DeathTag_03
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_T90_CrushEffect
  End
  Behavior = DestroyDie DeathTag_04
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = SlowDeathBehavior DeathTag_05
    DeathTypes = NONE +EXTRA_2
    FX  = FINAL    None
  End
  Behavior = CreateObjectDie DeathTag_06
    DeathTypes = NONE +EXTRA_2
    CreationList = OCL_DF41Packed
    TransferPreviousHealth = Yes
  End

;Radiation
  Behavior = SlowDeathBehavior DeathTag_07
    DeathTypes = NONE +EXTRA_8
    FX  = INITIAL FX_VehicleRadiationDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Poison
  Behavior = SlowDeathBehavior DeathTag_08
    DeathTypes = NONE +POISONED
    FX  = INITIAL FX_VehiclePoisonDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;PoisonBeta
    Behavior = SlowDeathBehavior DeathTag_09
    DeathTypes = NONE +POISONED_BETA
    FX  = INITIAL FX_VehiclePoisonBetaDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Stealth-------------------------------------------------------------
;---------------------------------------------------------------------

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData2
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = FireWeaponUpdate ModuleTag_13
    Weapon = TopolMKillObjectWeapon2
    InitialDelay = 6666
  End

  Behavior = StealthUpdate ModuleStealth_GPSScramblerGenericStealthModule
    StealthDelay                = 2000 ; msec
    InnateStealth               = Yes
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    RequiredStatus = REASSIGN_PARKING
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_IronCrutain
    StartsActive = Yes
    ReactionWeaponPristine = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    DamageTypes = NONE +WATER
  End

  Geometry = BOX
  GeometryMajorRadius = 38.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 15.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   
End

Object China_VehicleDF41AI

  ; *** ART Parameters ***
  SelectPortrait         = DF41_ic_L
  ButtonImage            = DF41_ic_L
  
  UpgradeCameo1 = Upgrade_ChinaBuyMissile
  UpgradeCameo2 = Upgrade_LightVehicleArmor

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = SECONDARY TERTIARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode                   = ONCE_BACKWARDS
      Turret = TURRET
      ;TurretPitch = TURRETEL
      Flags                           = START_FRAME_FIRST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      ;HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End
      
    ConditionState                    = RUBBLE
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode                   = ONCE_BACKWARDS
      Turret                          = TURRET
      Flags                           = START_FRAME_FIRST
      WeaponLaunchBone                = PRIMARY WEAPONA
      WeaponFireFXBone                = PRIMARY FIREFX
      WeaponLaunchBone                = SECONDARY WEAPONA
      WeaponFireFXBone                = SECONDARY FIREFX
      WeaponLaunchBone                = TERTIARY WEAPONA
      WeaponFireFXBone                = TERTIARY FIREFX
      ;HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation                       = NVDF41.NVDF41
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation                       = NVDF41.NVDF41
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = NVDF41
      Animation                       = NVDF41.NVDF41
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = NVDF41_D
      Animation                       = NVDF41_D.NVDF41_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
      Model                           = NVDF41D
      Animation                       = NVDF41D.NVDF41D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
      Model                           = NVDF41D_D
      Animation                       = NVDF41D_D.NVDF41D_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftRearTireBone      = Tire07
    RightRearTireBone     = Tire05
    MidLeftRearTireBone   = Tire08
    MidRightRearTireBone  = Tire06

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.

  End





  Draw = W3DTruckDraw ModuleTag_02
  
    ConditionState = NONE
      Model = NVDF41_W
    End
    
    ConditionState = REALLYDAMAGED
      Model = NVDF41_WD
    End
    AliasConditionState = RUBBLE


    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Model = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = REALLYDAMAGED MOVING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Model = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
    End

    ConditionState    = REALLYDAMAGED UNPACKING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
    End

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = REALLYDAMAGED PACKING
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End

    ConditionState  = FIRING_B
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_B REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = FIRING_C REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End


    ConditionState  = RELOADING_B
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C
      Model                           = NVDF41_W
      Animation                       = NVDF41_W.NVDF41_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_B REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    ConditionState  = RELOADING_C REALLYDAMAGED
      Model                           = NVDF41_WD
      Animation                       = NVDF41_WD.NVDF41_WD
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject                   = WEAPONA01 HOUSECOLOR07
    End

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07
    


    TireRotationMultiplier = 0.2
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:DF41
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost       = 1200
  BuildTime       = 60.0          ;in seconds    
  VisionRange     = 9999
  ShroudClearingRange = 250

  WeaponSet
    Conditions = NONE
    Weapon            = SECONDARY DF41MissileWeaponAI
  End

  Prerequisites
    Object = ChinaInternetCenter
    Object = ChinaPropagandaCenter
    Science = SCIENCE_Rank4
  End
  ExperienceValue         = 250 250 350 600  ;Experience point value at each level
  IsTrainable = No             ;Can gain experience

  ArmorSet
    Conditions      = None
    Armor           = TopolMArmor
    DamageFX        = TruckDamageFX
  End

  ArmorSet
    Conditions            = PLAYER_UPGRADE
    Armor                 = TopolMArmor2
    DamageFX              = TruckDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = DF41CommandSet

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!

  ; *** AUDIO Parameters ***
  VoiceSelect           = NukeCannonVoiceSelect
  VoiceMove             = NukeCannonVoiceMove
  VoiceGuard            = NukeCannonVoiceMove
  VoiceAttack           = NukeCannonVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = NukeCannonVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = NukeCannonVoiceMove
    Deploy              = TopolDeploy
    Undeploy            = TopolDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = VEHICLE CAN_ATTACK HUGE_VEHICLE PRELOAD SELECTABLE SCORE CAN_CAST_REFLECTIONS CANNOT_RETALIATE
  Body            = ActiveBody ModuleTag_03
    MaxHealth       = 550.0
    InitialHealth   = 550.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
     Turret
     TurretTurnRate        = 9999
     RecenterTime          = 1        ; how long to wait during idle before recentering
     ControlledWeaponSlots = SECONDARY TERTIARY
     NaturalTurretAngle    = 0
     InitiallyDisabled     = Yes
  End
    PackTime = 6666
    UnpackTime = 6666
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate = 33300
  End

  Locomotor = SET_NORMAL DF41Locomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

;Upgrades----------------------------------------------------------
  Behavior = ObjectCreationUpgrade Upgrade_03
    UpgradeObject = OCL_NukeEarlyWarningObject
    TriggeredBy   = Upgrade_AmericaScoutDrone
    RequiresAllTriggers = Yes
  End
  Behavior                = ArmorUpgrade Upgrade_04
    TriggeredBy           = Upgrade_LightVehicleArmor
  End
  Behavior = MaxHealthUpgrade Upgrade_05
    TriggeredBy   = Upgrade_LightVehicleArmor
    AddMaxHealth  = 165.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End
;Deaths-------------------------------------------------------------
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes = ALL
    FX  = INITIAL  FX_BigMissileCarrierDeath
    OCL = MIDPOINT OCL_SCUDDebrisFlyoff
    OCL = FINAL    OCL_ChinaDF41Debris
  End
  Behavior = FXListDie  DeathTag_02
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_BigMissileCarrierDeath
  End
  Behavior = CreateObjectDie  DeathTag_03
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_T90_CrushEffect
  End
  Behavior = DestroyDie DeathTag_04
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

;Radiation
  Behavior = SlowDeathBehavior DeathTag_07
    DeathTypes = NONE +EXTRA_8
    FX  = INITIAL FX_VehicleRadiationDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Poison
  Behavior = SlowDeathBehavior DeathTag_08
    DeathTypes = NONE +POISONED
    FX  = INITIAL FX_VehiclePoisonDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;PoisonBeta
    Behavior = SlowDeathBehavior DeathTag_09
    DeathTypes = NONE +POISONED_BETA
    FX  = INITIAL FX_VehiclePoisonBetaDeath
    SinkRate = 2.5
    SinkDelay = 6000
    DestructionDelay = 14000
  End
;Stealth-------------------------------------------------------------
;---------------------------------------------------------------------

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData2
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  
  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = GrantUpgradeCreate ModuleTag_11
   UpgradeToGrant = Upgrade_AmericaScoutDrone
  End

  Behavior = StealthUpdate ModuleStealth_GPSScramblerGenericStealthModule
    StealthDelay                = 2000 ; msec
    InnateStealth               = Yes
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    RequiredStatus = REASSIGN_PARKING
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_IronCrutain
    StartsActive = Yes
    ReactionWeaponPristine = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    ReactionWeaponDamaged = IronCrutainDroneWeapon
    ReactionWeaponReallyDamaged = IronCrutainDroneWeapon
    ReactionWeaponRubble = IronCrutainDroneWeapon
    DamageTypes = NONE +WATER
  End

  Geometry = BOX
  GeometryMajorRadius = 38.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 15.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   
End