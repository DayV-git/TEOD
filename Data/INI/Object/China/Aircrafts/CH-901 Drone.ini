;------------------------------------------------------------------------------
Object China_VehicleNestDrone

  ; *** ART Parameters ***
  SelectPortrait         = NestDrone_ic_L
  ButtonImage            = NestDrone_ic_L
  
  UpgradeCameo1 = Upgrade_ChinaAircraftArmor
  
  Draw = W3DModelDraw ModuleTag_01


    OkToChangeModelColor = Yes

    DefaultConditionState
      Model               = NVNestDr
      Animation       = NVNestDr.NVNestDr
      AnimationMode   = ONCE
      Flags                           = START_FRAME_LAST
      WeaponLaunchBone    = PRIMARY WEAPONA
      WeaponLaunchBone    = SECONDARY WEAPONA
    End

    ConditionState        = REALLYDAMAGED
      Model                           = NVNestDr_D
      Animation       = NVNestDr_D.NVNestDr_D
      AnimationMode   = ONCE
      Flags                           = START_FRAME_LAST
      WeaponLaunchBone    = PRIMARY WEAPONA
      WeaponLaunchBone    = SECONDARY WEAPONA
    End

    ConditionState        = RUBBLE
      Model                           = NVNestDr_D
      Animation       = NVNestDr_D.NVNestDr_D
      AnimationMode   = ONCE
      Flags                           = START_FRAME_LAST
    End

  End

  Draw = W3DModelDraw ModuleTag_PickBox
    DefaultConditionState
      Model               = DronePickBox
    End
  End

  ; ***DESIGN parameters ***
  DisplayName             = OBJECT:NestDrone
  EditorSorting           = VEHICLE
  Side                    = China
  TransportSlotCount      = 0          ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange             = 250.0 
  ShroudClearingRange     = 225.0

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY    NesFireDroneWeapon
  End

  ArmorSet
    Conditions           = None
    Armor                = GLASuicideDroneArmor
    DamageFX             = AAHitscanDamageFX
  End

  ExperienceValue         = 5 5 5 5  ;Experience point value at each level
  IsTrainable = No            ;Can gain experience
  CrusherLevel           = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = MigAmbientLoop
  SoundAmbient            = MigAmbientLoop
  SoundMoveStartDamaged = MigAmbientLoop

  UnitSpecificSounds
    VoiceCreate         = SentryDroneVoiceSelect
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf                 = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE PRODUCED_AT_HELIPAD 
  Body                   = ActiveBody ModuleTag_02
    MaxHealth            = 30.0
    InitialHealth        = 30.0
  End

  Behavior = SpecialPowerCreate ModuleTag_03
    ;nothing
  End

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 500.0
  End

  Behavior = ChinookAIUpdate ModuleTag_05
    AutoAcquireEnemiesWhenIdle = Yes 
    MoodAttackCheckRate           = 333
  End
  Locomotor = SET_NORMAL CH901DroneLocomotor

;Upgrades----------------------------------------------------------
  Behavior        = MaxHealthUpgrade Upgrade_01
    TriggeredBy   = Upgrade_ChinaAircraftArmor
    AddMaxHealth  = 15.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End
;Deaths-------------------------------------------------------------
 Behavior                            = JetSlowDeathBehavior DeathTag_01
    DeathTypes = ALL -EXTRA_5
    OCL = FINAL OCL_AmericaScoutDroneExplode
 End

 Behavior = JetSlowDeathBehavior DeathTag_03
    DeathTypes = NONE +EXTRA_5
 End
;Stealth-------------------------------------------------------------

;---------------------------------------------------------------------
  Behavior = FlammableUpdate ModuleTag_06
    AflameDuration = 5000        ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500      ; this often.
  End

  Behavior                       = TransitionDamageFX ModuleTag_07
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Behavior = LifetimeUpdate ModuleTag_08
    MinLifetime = 23000   ; min lifetime in msec
    MaxLifetime = 23000   ; max lifetime in msec
  End

  Geometry              = CYLINDER
  GeometryMajorRadius   = 7.0
  GeometryHeight        = 7.0     
  GeometryIsSmall       = No
  Shadow                   = SHADOW_VOLUME
  
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length
End