Object TechOilDerrickXL

  ; *** ART Parameters ***
  SelectPortrait         = SSTechOilDerrick_L
  
  ; ========================= Main Model ===============================
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
  
    ; DAY **************************************************************
    ConditionState  = NONE
      Model         = ZBODerrick
    End
    ConditionState  = CAPTURED
      Model         = ZBODerrick
      Animation     = ZBODerrick.ZBODerrick
      AnimationMode = LOOP
    End
    
    ; DAMAGED **********************************************************
    ConditionState  = DAMAGED
      Model         = ZBODerrick_D
    End
    ConditionState  = DAMAGED CAPTURED
      Model         = ZBODerrick_D
      Animation     = ZBODerrick_D.ZBODerrick_D
      AnimationMode = LOOP
    End
    
    ; REALLYDAMAGED ****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBODerrick_E
    End
    ConditionState  = REALLYDAMAGED CAPTURED
      Model         = ZBODerrick_E
      Animation     = ZBODerrick_E.ZBODerrick_E
      AnimationMode = LOOP
    End

    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = ZBODerrick_R
    End

    ; NIGHT ************************************************************
    ConditionState  = NIGHT
      Model         = ZBODerrick_N
    End
    ConditionState  = NIGHT CAPTURED
      Model         = ZBODerrick_N
      Animation     = ZBODerrick_N.ZBODerrick_N
      AnimationMode = LOOP
    End
    
    ; NIGHT DAMAGED ****************************************************
    ConditionState  = DAMAGED NIGHT
      Model         = ZBODerrick_DN
    End
    ConditionState  = DAMAGED NIGHT CAPTURED
      Model         = ZBODerrick_DN
      Animation     = ZBODerrick_DN.ZBODerrick_DN
      AnimationMode = LOOP
    End
    
    ; NIGHT REALLYDAMAGED **********************************************
    ConditionState  = REALLYDAMAGED NIGHT
      Model         = ZBODerrick_EN
    End
    ConditionState  = REALLYDAMAGED NIGHT CAPTURED
      Model         = ZBODerrick_EN
      Animation     = ZBODerrick_EN.ZBODerrick_EN
      AnimationMode = LOOP
    End

    ; NIGHT RUBBLE *****************************************************
    ConditionState  = NIGHT RUBBLE
      Model         = ZBODerrick_R
    End
    
    ; SNOW *************************************************************
    ConditionState  = SNOW
      Model         = ZBODerrick_S
    End
    ConditionState  = SNOW CAPTURED
      Model         = ZBODerrick_S
      Animation     = ZBODerrick_S.ZBODerrick_S
      AnimationMode = LOOP
    End
    
    ; SNOW DAMAGED *****************************************************
    ConditionState  = DAMAGED SNOW
      Model         = ZBODerrick_DS
    End
    ConditionState  = DAMAGED SNOW CAPTURED
      Model         = ZBODerrick_DS
      Animation     = ZBODerrick_DS.ZBODerrick_DS
      AnimationMode = LOOP
    End
    
    ; SNOW REALLYDAMAGED ***********************************************
    ConditionState  = REALLYDAMAGED SNOW
      Model         = ZBODerrick_ES
    End
    ConditionState  = REALLYDAMAGED SNOW CAPTURED
      Model         = ZBODerrick_ES
      Animation     = ZBODerrick_ES.ZBODerrick_ES
      AnimationMode = LOOP
    End

    ; SNOW RUBBLE ******************************************************
    ConditionState  = SNOW RUBBLE
      Model         = ZBODerrick_RS
    End
    
    ; SNOW NIGHT *******************************************************
    ConditionState  = SNOW NIGHT
      Model         = ZBODerrick_NS
    End
    ConditionState  = SNOW NIGHT CAPTURED
      Model         = ZBODerrick_NS
      Animation     = ZBODerrick_NS.ZBODerrick_NS
      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT DAMAGED ***********************************************
    ConditionState  = SNOW NIGHT DAMAGED
      Model         = ZBODerrick_DNS
    End
    ConditionState  = SNOW NIGHT DAMAGED CAPTURED
      Model         = ZBODerrick_DNS
      Animation     = ZBODerrick_DNS.ZBODerrick_DNS
      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT REALLYDAMAGED *****************************************
    ConditionState  = SNOW NIGHT REALLYDAMAGED
      Model         = ZBODerrick_ENS
    End
    ConditionState  = SNOW NIGHT REALLYDAMAGED CAPTURED
      Model         = ZBODerrick_ENS
      Animation     = ZBODerrick_EN.ZBODerrick_ENS
      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT RUBBLE ************************************************
    ConditionState  = SNOW NIGHT RUBBLE
      Model         = ZBODerrick_RS
    End
    
  End

  ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBODerrick_F
      Animation     = ZBODerrick_F.ZBODerrick_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBODerrick_FE
      Animation     = ZBODerrick_FE.ZBODerrick_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
 End
     ; ------------ New Animations fence -----------------
  Draw = W3DModelDraw ModuleTag_LightingAnimations
  AnimationsRequirePower = No
  
    DefaultConditionState
      Model           = ZBODerrick_A1
      Animation       = ZBODerrick_A1.ZBODerrick_A1
      AnimationMode   = LOOP
    End
    
    ConditionState    = DAMAGED
      Model           = ZBODerrick_A1D
      Animation       = ZBODerrick_A1D.ZBODerrick_A1D
      AnimationMode   = LOOP
    End
    
    ConditionState    = REALLYDAMAGED
      Model           = ZBODerrick_A1E
      Animation       = ZBODerrick_A1E.ZBODerrick_A1E
      AnimationMode   = LOOP
    End
    
    ConditionState    = RUBBLE
      Model           = NONE
    End
    
  End
  
  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TechOilDerrick
  Side              = Civilian
  EditorSorting     = STRUCTURE
  ShroudClearingRange = 100

  Scale = 1.25

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE SELECTABLE IMMOBILE CAPTURABLE TECH_BUILDING CONSERVATIVE_BUILDING
  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 5000.0
    InitialHealth   = 5000.0
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End

  Behavior              = AutoDepositUpdate ModuleTag_04
    DepositTiming       = 1200  ; in milliseconds
    DepositAmount       = 40    ; cash amount to deposit every Deposit Timings
    InitialCaptureBonus = 1000   ;capture bonus only happens once
    ;UpgradedBoost       = UpgradeType:Upgrade_AmericaSupplyLines  Boost:20
  End
    
  Behavior                = FlammableUpdate ModuleTag_05
    FlameDamageLimit      = 20    ; Catch fire if I take this much fire damage...
    FlameDamageExpiration = 2000  ; in a span of this long
    AflameDuration        = 5000  ; If I catch fire, I'll burn for this long...
    AflameDamageAmount    = 25    ; taking this much damage...
    AflameDamageDelay     = 500   ; this often.
  End
  
  Behavior             = FXListDie ModuleTag_07
    DeathFX            = WeaponFX_BombTruckDefaultBombDetonation
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = TechBuildingBehavior ModuleTag_09
    ;<NO DATA>
  End

  Behavior = FXListDie ModuleTag_10
    DeathFX = FX_BuildingDie
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

  Geometry              = BOX
  GeometryMajorRadius   = 28.75
  GeometryMinorRadius   = 26.25
  GeometryHeight        = 37.5
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME


End

Object TechOilDerrick

  ; *** ART Parameters ***
  SelectPortrait         = SSTechOilDerrick_L
  
  ; ========================= Main Model ===============================
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
  
    ; DAY **************************************************************
    ConditionState  = NONE
      Model         = ZBODerrick
    End
    ConditionState  = CAPTURED
      Model         = ZBODerrick
      Animation     = ZBODerrick.ZBODerrick
      AnimationMode = LOOP
    End
    
    ; DAMAGED **********************************************************
    ConditionState  = DAMAGED
      Model         = ZBODerrick_D
    End
    ConditionState  = DAMAGED CAPTURED
      Model         = ZBODerrick_D
      Animation     = ZBODerrick_D.ZBODerrick_D
      AnimationMode = LOOP
    End
    
    ; REALLYDAMAGED ****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBODerrick_E
    End
    ConditionState  = REALLYDAMAGED CAPTURED
      Model         = ZBODerrick_E
      Animation     = ZBODerrick_E.ZBODerrick_E
      AnimationMode = LOOP
    End

    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = ZBODerrick_R
    End

    ; NIGHT ************************************************************
    ConditionState  = NIGHT
      Model         = ZBODerrick_N
    End
    ConditionState  = NIGHT CAPTURED
      Model         = ZBODerrick_N
      Animation     = ZBODerrick_N.ZBODerrick_N
      AnimationMode = LOOP
    End
    
    ; NIGHT DAMAGED ****************************************************
    ConditionState  = DAMAGED NIGHT
      Model         = ZBODerrick_DN
    End
    ConditionState  = DAMAGED NIGHT CAPTURED
      Model         = ZBODerrick_DN
      Animation     = ZBODerrick_DN.ZBODerrick_DN
      AnimationMode = LOOP
    End
    
    ; NIGHT REALLYDAMAGED **********************************************
    ConditionState  = REALLYDAMAGED NIGHT
      Model         = ZBODerrick_EN
    End
    ConditionState  = REALLYDAMAGED NIGHT CAPTURED
      Model         = ZBODerrick_EN
      Animation     = ZBODerrick_EN.ZBODerrick_EN
      AnimationMode = LOOP
    End

    ; NIGHT RUBBLE *****************************************************
    ConditionState  = NIGHT RUBBLE
      Model         = ZBODerrick_R
    End
    
    ; SNOW *************************************************************
    ConditionState  = SNOW
      Model         = ZBODerrick_S
    End
    ConditionState  = SNOW CAPTURED
      Model         = ZBODerrick_S
      Animation     = ZBODerrick_S.ZBODerrick_S
      AnimationMode = LOOP
    End
    
    ; SNOW DAMAGED *****************************************************
    ConditionState  = DAMAGED SNOW
      Model         = ZBODerrick_DS
    End
    ConditionState  = DAMAGED SNOW CAPTURED
      Model         = ZBODerrick_DS
      Animation     = ZBODerrick_DS.ZBODerrick_DS
      AnimationMode = LOOP
    End
    
    ; SNOW REALLYDAMAGED ***********************************************
    ConditionState  = REALLYDAMAGED SNOW
      Model         = ZBODerrick_ES
    End
    ConditionState  = REALLYDAMAGED SNOW CAPTURED
      Model         = ZBODerrick_ES
      Animation     = ZBODerrick_ES.ZBODerrick_ES
      AnimationMode = LOOP
    End

    ; SNOW RUBBLE ******************************************************
    ConditionState  = SNOW RUBBLE
      Model         = ZBODerrick_RS
    End
    
    ; SNOW NIGHT *******************************************************
    ConditionState  = SNOW NIGHT
      Model         = ZBODerrick_NS
    End
    ConditionState  = SNOW NIGHT CAPTURED
      Model         = ZBODerrick_NS
      Animation     = ZBODerrick_NS.ZBODerrick_NS
      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT DAMAGED ***********************************************
    ConditionState  = SNOW NIGHT DAMAGED
      Model         = ZBODerrick_DNS
    End
    ConditionState  = SNOW NIGHT DAMAGED CAPTURED
      Model         = ZBODerrick_DNS
      Animation     = ZBODerrick_DNS.ZBODerrick_DNS
      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT REALLYDAMAGED *****************************************
    ConditionState  = SNOW NIGHT REALLYDAMAGED
      Model         = ZBODerrick_ENS
    End
    ConditionState  = SNOW NIGHT REALLYDAMAGED CAPTURED
      Model         = ZBODerrick_ENS
      Animation     = ZBODerrick_EN.ZBODerrick_ENS
      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT RUBBLE ************************************************
    ConditionState  = SNOW NIGHT RUBBLE
      Model         = ZBODerrick_RS
    End
    
  End

  ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBODerrick_F
      Animation     = ZBODerrick_F.ZBODerrick_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBODerrick_FE
      Animation     = ZBODerrick_FE.ZBODerrick_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
 End
     ; ------------ New Animations fence -----------------
  Draw = W3DModelDraw ModuleTag_LightingAnimations
  AnimationsRequirePower = No
  
    DefaultConditionState
      Model           = ZBODerrick_A1
      Animation       = ZBODerrick_A1.ZBODerrick_A1
      AnimationMode   = LOOP
    End
    
    ConditionState    = DAMAGED
      Model           = ZBODerrick_A1D
      Animation       = ZBODerrick_A1D.ZBODerrick_A1D
      AnimationMode   = LOOP
    End
    
    ConditionState    = REALLYDAMAGED
      Model           = ZBODerrick_A1E
      Animation       = ZBODerrick_A1E.ZBODerrick_A1E
      AnimationMode   = LOOP
    End
    
    ConditionState    = RUBBLE
      Model           = NONE
    End
    
  End
  
  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TechOilDerrick
  EditorSorting   = STRUCTURE
  ShroudClearingRange = 100

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE SELECTABLE IMMOBILE CAPTURABLE TECH_BUILDING 
  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 2500.0
    InitialHealth   = 2500.0
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  Behavior              = AutoDepositUpdate ModuleTag_04
    DepositTiming       = 12000  ; in milliseconds
    DepositAmount       = 200    ; cash amount to deposit every Deposit Timings
    InitialCaptureBonus = 500   ;capture bonus only happens once
  End
    
  Behavior                = FlammableUpdate ModuleTag_05
    FlameDamageLimit      = 20    ; Catch fire if I take this much fire damage...
    FlameDamageExpiration = 2000  ; in a span of this long
    AflameDuration        = 5000  ; If I catch fire, I'll burn for this long...
    AflameDamageAmount    = 25    ; taking this much damage...
    AflameDamageDelay     = 500   ; this often.
  End
  
  Behavior             = FXListDie ModuleTag_07
    DeathFX            = WeaponFX_BombTruckDefaultBombDetonation
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = FXListDie ModuleTag_10
    DeathFX = FX_BuildingDie
  End

  Behavior = InstantDeathBehavior DeathTag_01
    DeathTypes = ALL
    OCL = OCL_InitiateOilDerrickDestroyedObject
  End

;  Behavior             = DestroyDie DeathTag_02
;    ;nothing
;  End

  Geometry              = BOX
  GeometryMajorRadius   = 23.0
  GeometryMinorRadius   = 21.0
  GeometryHeight        = 30.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME


End


;------------------------------------------------------------------------------
Object TechOilDerrickDestroyed

  ; *** ART Parameters ***
  SelectPortrait         = SSTechOilDerrick_L
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model         = ZBODerrick_R
      HideSubObject      = FIREM01
      ParticleSysBone     = SMOKEM02 OilDerrickFlame
      ParticleSysBone     = SMOKEM02 OilDerrickFlameSmoke
    End
    
    ConditionState  = SNOW
      Model         = ZBODerrick_RS
      HideSubObject      = FIREM01
      ParticleSysBone     = SMOKEM02 OilDerrickFlame
      ParticleSysBone     = SMOKEM02 OilDerrickFlameSmoke
    End

    ConditionState    = RUBBLE
      Model           = NONE
    End

    ConditionState    = RUBBLE SNOW
      Model           = NONE
    End
  End

  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ConditionState  = NONE
      Model         = ZBOilDerrick_F
      Animation     = ZBOilDerrick_F.ZBOilDerrick_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    AliasConditionState =     REALLYDAMAGED

    ConditionState  = RUBBLE
      Model         = None
    End
 End


  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TechOilDerrick
  Side                = Civilian
  EditorSorting   = STRUCTURE
  ShroudClearingRange = 100


  ArmorSet
    Conditions      = None
    Armor           = RussiaT14HeavyArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE CAPTURABLE SELECTABLE IMMOBILE NO_HEAL_ICON UNATTACKABLE TECH_BUILDING
  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 99999.0
    InitialHealth   = 99999.0
  End 

    
  CommandSet            = DestroyedOilDerrickCommandSet
  
  Behavior = AIUpdateInterface ModuleTag_04
  End
  
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 3000
    HealingDelay = 1 ; msec
    StartsActive = Yes
  End

  Behavior = ProductionUpdate ModuleTag_06
    NumDoorAnimations            = 1
    DoorOpeningTime              = 1  ;in mSeconds
    DoorWaitOpenTime             = 3  ;in mSeconds
    DoorCloseTime                = 1  ;in mSeconds
    ConstructionCompleteDuration = 1  ;in mSeconds
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_07
    UnitCreatePoint   = X:0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 0.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

;  Behavior = FireWeaponUpdate ModuleTag_11
;    Weapon = RUSupplyPileNeutralizeWeapon
;    InitialDelay = 1500
;  End

;Upgrades----------------------------------------------------------

;End of Upgrades----------------------------------------------------------

  Behavior = InstantDeathBehavior DeathTag_01
    DeathTypes = ALL
    OCL = OCL_OilDerrickRebuild
  End

  Geometry              = BOX
  GeometryMajorRadius   = 23.0
  GeometryMinorRadius   = 21.0
  GeometryHeight        = 5.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End
;------------------------------------------------------------------------------
Object TechOilRefinery

  ; *** ART Parameters ***
  SelectPortrait         = SSTechOilRefinery_L
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; DAY ********************************************
    ConditionState     = NONE
      Model            = ZBRefinery
      Animation        = ZBRefinery.ZBRefinery
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; DAMAGED ********************************************
    ConditionState     = DAMAGED
      Model            = ZBRefinery_D
      Animation        = ZBRefinery_D.ZBRefinery_D
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmolderingSmoke
      ParticleSysBone  = Smoke05 SmolderingSmoke
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; REALLYDAMAGED ****************************************
    ConditionState     = REALLYDAMAGED
      Model            = ZBRefinery_E
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmokeFactionLarge
      ParticleSysBone  = Smoke05 SmokeFactionLarge
      ParticleSysBone  = Smoke06 SmokeFactionLarge
      ParticleSysBone  = Fire01 FireBurningBarricade01
      ParticleSysBone  = Fire02 SmolderingFire
      ParticleSysBone  = Fire03 FireFactionLarge
      ParticleSysBone  = Fire04 FireFactionLarge
      ParticleSysBone  = Fire05 FireFactionLarge
    End
    ; RUBBLE *********************************************    
    ConditionState     = RUBBLE
      Model            = ZBRefinery_R
    End

    ; NIGHT ********************************************
    ConditionState     = NIGHT
      Model            = ZBRefinery_N
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; NIGHT DAMAGED ********************************************
    ConditionState     = NIGHT DAMAGED
      Model            = ZBRefinery_DN
      Animation        = ZBRefinery_DN.ZBRefinery_DN
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmolderingSmoke
      ParticleSysBone  = Smoke05 SmolderingSmoke
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; NIGHT REALLYDAMAGED ********************************************
    ConditionState     = NIGHT REALLYDAMAGED 
      Model            = ZBRefinery_EN
      Animation        = ZBRefinery_EN.ZBRefinery_EN
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmokeFactionLarge
      ParticleSysBone  = Smoke05 SmokeFactionLarge
      ParticleSysBone  = Smoke06 SmokeFactionLarge
      ParticleSysBone  = Fire01 FireBurningBarricade01
      ParticleSysBone  = Fire02 SmolderingFire
      ParticleSysBone  = Fire03 FireFactionLarge
      ParticleSysBone  = Fire04 FireFactionLarge
      ParticleSysBone  = Fire05 FireFactionLarge
    End
    ; NIGHT RUBBLE ****************************************
    ConditionState     = NIGHT RUBBLE
      Model            = ZBRefinery_R
    End

    ; SNOW ********************************************
    ConditionState     = SNOW
      Model            = ZBRefinery_S
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; SNOW DAMAGED ********************************************
    ConditionState     = SNOW DAMAGED
      Model            = ZBRefinery_DS
      Animation        = ZBRefinery_DS.ZBRefinery_DS
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmolderingSmoke
      ParticleSysBone  = Smoke05 SmolderingSmoke
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; SNOW REALLYDAMAGED ********************************************
    ConditionState     = SNOW REALLYDAMAGED
      Model            = ZBRefinery_ES
      Animation        = ZBRefinery_ES.ZBRefinery_ES
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmokeFactionLarge
      ParticleSysBone  = Smoke05 SmokeFactionLarge
      ParticleSysBone  = Smoke06 SmokeFactionLarge
      ParticleSysBone  = Fire01 FireBurningBarricade01
      ParticleSysBone  = Fire02 SmolderingFire
      ParticleSysBone  = Fire03 FireFactionLarge
      ParticleSysBone  = Fire04 FireFactionLarge
      ParticleSysBone  = Fire05 FireFactionLarge
    End
    ; SNOW RUBBLE ****************************************
    ConditionState     = SNOW RUBBLE
      Model            = ZBRefinery_RS
    End

    ; NIGHT SNOW ********************************************
    ConditionState     = NIGHT SNOW
      Model            = ZBRefinery_NS
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; NIGHT SNOW DAMAGED ********************************************
    ConditionState     = NIGHT SNOW DAMAGED
      Model            = ZBRefinery_DNS
      Animation        = ZBRefinery_DNS.ZBRefinery_DNS
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmolderingSmoke
      ParticleSysBone  = Smoke05 SmolderingSmoke
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; NIGHT SNOW REALLYDAMAGED ********************************************
    ConditionState     = NIGHT SNOW REALLYDAMAGED
      Model            = ZBRefinery_ENS
      Animation        = ZBRefinery_ENS.ZBRefinery_ENS
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmokeFactionLarge
      ParticleSysBone  = Smoke05 SmokeFactionLarge
      ParticleSysBone  = Smoke06 SmokeFactionLarge
      ParticleSysBone  = Fire01 FireBurningBarricade01
      ParticleSysBone  = Fire02 SmolderingFire
      ParticleSysBone  = Fire03 FireFactionLarge
      ParticleSysBone  = Fire04 FireFactionLarge
      ParticleSysBone  = Fire05 FireFactionLarge
    End
    ; NIGHT SNOW RUBBLE ****************************************
    ConditionState     = NIGHT SNOW RUBBLE
      Model            = ZBRefinery_RS
    End
    
  End

  ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBRefinery_F
      Animation     = ZBRefinery_F.ZBRefinery_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED *****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBRefinery_FE
      Animation     = ZBRefinery_FE.ZBRefinery_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
    
  End
; ------------ New Animations fence -----------------
  Draw = W3DModelDraw ModuleTag_LightingAnimations
  AnimationsRequirePower = No
  
    DefaultConditionState
      Model           = ZBRefinery_A1
      Animation       = ZBRefinery_A1.ZBRefinery_A1
      AnimationMode   = LOOP
    End
    
    ConditionState    = DAMAGED
      Model           = ZBRefinery_A1D
      Animation       = ZBRefinery_A1D.ZBRefinery_A1D
      AnimationMode   = LOOP
    End
    
    ConditionState    = REALLYDAMAGED
      Model           = ZBRefinery_A1E
      Animation       = ZBRefinery_A1E.ZBRefinery_A1E
      AnimationMode   = LOOP
    End
    
    ConditionState    = RUBBLE
      Model           = NONE
    End
    
  End
  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  
  ; ***DESIGN parameters ***
  DisplayName          = OBJECT:TechOilRefinery
  EditorSorting        = STRUCTURE
  ShroudClearingRange  = 100

  ; *** ENGINEERING Parameters ***  
  KindOf               = STRUCTURE SELECTABLE IMMOBILE CAPTURABLE TECH_BUILDING CONSERVATIVE_BUILDING
  Body                 = ActiveBody ModuleTag_03
    MaxHealth          = 2500.0
    InitialHealth      = 2500.0
  End
  ArmorSet
    Conditions = None
    Armor      = StructureArmor
    DamageFX   = StructureDamageFXNoShake
  End
  
  Behavior         = GrantUpgradeCreate ModuleTag_04
    UpgradeToGrant = Upgrade_InfantryCaptureBuilding
  End
  Behavior       = CostModifierUpgrade ModuleTag_05
    TriggeredBy  = Upgrade_InfantryCaptureBuilding
    EffectKindOf = VEHICLE
    Percentage   = -10%
  End
  
  Behavior                = FlammableUpdate ModuleTag_07
    FlameDamageLimit      = 20    ; Catch fire if I take this much fire damage...
    FlameDamageExpiration = 2000  ; in a span of this long
    AflameDuration        = 5000  ; If I catch fire, I'll burn for this long...
    AflameDamageAmount    = 25    ; taking this much damage...
    AflameDamageDelay     = 500   ; this often.
  End

  Behavior             = FXListDie ModuleTag_08
    DeathFX            = WeaponFX_BombTruckHighExplosiveBombDetonation
  End

  Behavior = TransitionDamageFX ModuleTag_09
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

  Behavior = TechBuildingBehavior ModuleTag_10
    ;<NO DATA>
  End

  Behavior = FXListDie ModuleTag_11
    DeathFX = FX_BuildingDie
  End

  Geometry             = BOX
  GeometryMajorRadius  = 37.0
  GeometryMinorRadius  = 40.0
  GeometryHeight       = 60.0
  GeometryIsSmall      = No
  Shadow               = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object TechShipyard

  ; *** ART Parameters ***
  ;SelectPortrait         = Missing
  ;ButtonImage            = Missing

  ; ------------ the main factory itself -----------------
  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    DefaultConditionState
      Model           = TechSY
      Animation     = TechSY.TechSY
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
    ConditionState    = DAMAGED
      Model           = TechSY_D
      Animation     = TechSY_D.TechSY_D
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = TechSY_E
      Animation     = TechSY_E.TechSY_E
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End

    ConditionState    = NIGHT
      Model           = TechSY_N
      Animation     = TechSY_N.TechSY_N
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
    ConditionState = DAMAGED NIGHT
      Model           = TechSY_DN
      Animation     = TechSY_DN.TechSY_DN
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model           = TechSY_EN
      Animation     = TechSY_EN.TechSY_EN
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
    
    ConditionState    = NIGHT SNOW
      Model           = TechSY_NS
      Animation     = TechSY_NS.TechSY_NS
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model           = TechSY_DNS
      Animation     = TechSY_DNS.TechSY_DNS
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = TechSY_ENS
      Animation     = TechSY_ENS.TechSY_ENS
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
         
    ConditionState    = SNOW
      Model           = TechSY_S
      Animation     = TechSY_S.TechSY_S
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest 
    End
    ConditionState = DAMAGED SNOW
      Model           = TechSY_DS
      Animation     = TechSY_DS.TechSY_DS
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model           = TechSY_ES
      Animation     = TechSY_ES.TechSY_ES
      AnimationMode = LOOP
      ParticleSysBone = WAVEFX01 AmphibWaveRest
      ParticleSysBone = WAVEFX02 AmphibWaveRest
      ParticleSysBone = WAVEFX03 AmphibWaveRest
      ParticleSysBone = WAVEFX04 AmphibWaveRest
      ParticleSysBone = WAVEFX05 AmphibWaveRest
      ParticleSysBone = WAVEFX06 AmphibWaveRest
      ParticleSysBone = WAVEFX07 AmphibWaveRest
      ParticleSysBone = WAVEFX08 AmphibWaveRest
    End
  End

  

  ; ----------------- the factory door -------------------
  Draw                = W3DModelDraw ModuleTag_06
    DefaultConditionState
      Model           = TechSY_A8
      Animation     = TechSY_A8.TechSY_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = TechSY_A8D
      Animation     = TechSY_A8D.TechSY_A8D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = TechSY_A8E
      Animation     = TechSY_A8E.TechSY_A8E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = TechSY_A8
      Animation     = TechSY_A8.TechSY_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = TechSY_A8D
      Animation     = TechSY_A8D.TechSY_A8D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
        Model           = TechSY_A8D
      Animation     = TechSY_A8D.TechSY_A8D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_CLOSING
      Model           = TechSY_A8
      Animation     = TechSY_A8.TechSY_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End 
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
      
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = TechSY_A8D
      Animation     = TechSY_A8D.TechSY_A8D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = TechSY_A8D
      Animation     = TechSY_A8D.TechSY_A8D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = TechSY_A8
      Animation     = TechSY_A8.TechSY_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN
     
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = TechSY_A8D
      Animation     = TechSY_A8D.TechSY_A8D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED
     
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = TechSY_A8D
      Animation     = TechSY_A8D.TechSY_A8D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Shipyard
  EditorSorting    = STRUCTURE

  BuildCost        = 2000
  BuildTime        = 35.0           ; in seconds
  EnergyProduction = -3
  CommandSet       = Russia_SMFNavalYard
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE REPAIR_PAD CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY FS_WARFACTORY CAPTURABLE TECH_BUILDING CONSERVATIVE_BUILDING
  Body            = StructureBody ModuleTag_09
    MaxHealth       = 5000.0
    InitialHealth   = 5000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = ProductionUpdate ModuleTag_12
    NumDoorAnimations            = 1
    DoorOpeningTime              = 3000  ;in mSeconds
    DoorWaitOpenTime             = 5000  ;in mSeconds
    DoorCloseTime                = 3000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_13
    UnitCreatePoint   = X:  60.0  Y:-7.0   Z:0.0
    NaturalRallyPoint = X: 200.0  Y:-7.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = RepairDockUpdate ModuleTag_14
    TimeForFullHeal   = 5000   ;(in milliseconds)     
    NumberApproachPositions = 5
  End

  Behavior = TransitionDamageFX ModuleTag_19
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior                  = StructureCollapseUpdate ModuleTag_Collapse1
    MinCollapseDelay        = 500
    MaxCollapseDelay        = 1500
    CollapseDamping         = 0.0
    MaxShudder              = 0.6
    MinBurstDelay           = 250
    MaxBurstDelay           = 800
    BigBurstFrequency       = 4
    OCL                     = INITIAL   OCL_StructureCollapseInitial
    OCL                     = DELAY     OCL_StructureCollapseDelay
    OCL                     = FINAL     OCL_StructureCollapseFinal
    FXList                  = INITIAL   FX_StructureCollapseInitial
    FXList                  = DELAY     FX_StructureCollapseDelay
    FXList                  = BURST     FX_StructureCollapseBurst
    FXList                  = FINAL     FX_StructureCollapseFinal
  End

  Behavior = FlammableUpdate ModuleTag_18
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior                        = SlowDeathBehavior ModuleTag_Collapse2
    DeathTypes                    = ALL
    DestructionDelay              = 1800
    ExemptStatus                  = UNDER_CONSTRUCTION
  End 
  
  Behavior = InstantDeathBehavior ModuleTag_Collapse3
    RequiredStatus = UNDER_CONSTRUCTION
    OCL            = OCL_LargeStructureDebris
    FX             = FX_LargeStructureDeath
  End

;  Behavior = CommandSetUpgrade ModuleTag_38
;    TriggeredBy = Upgrade_AssaultCommandset
;    CommandSet = Russia_AirNavalYard
;  End

;  Behavior = CommandSetUpgrade ModuleTag_39
;    TriggeredBy = Upgrade_ArmorCommandset
;    CommandSet = Russia_TDNavalYard
;  End

  Geometry            = BOX
  GeometryMajorRadius = 78.0
  GeometryMinorRadius = 85.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object TechArtilleryPlatform

  ; *** ART Parameters ***
  SelectPortrait         = SAArtillery_L
  ButtonImage            = SAArtillery_L
  
  
  ; ========================= Main Model ===============================
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; DAY **************************************************************
    DefaultConditionState
      Model                           = ZBARTPLAT
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponRecoilBone                = PRIMARY Barrel
      Turret                          = Turret01
      TurretPitch                     = TurretEL
    End
    ConditionState  = CAPTURED
      Model         = ZBARTPLAT
;      Animation     = ZBARTPLAT.ZBARTPLAT
;      AnimationMode = LOOP
    End
    
    ; DAMAGED **********************************************************
    ConditionState  = DAMAGED
      Model         = ZBARTPLAT_D
    End
    ConditionState  = DAMAGED CAPTURED
      Model         = ZBARTPLAT_D
;      Animation     = ZBARTPLAT_D.ZBARTPLAT_D
;      AnimationMode = LOOP
    End
    
    ; REALLYDAMAGED ****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBARTPLAT_E
    End
    ConditionState  = REALLYDAMAGED CAPTURED
      Model         = ZBARTPLAT_E
;      Animation     = ZBARTPLAT_E.ZBARTPLAT_E
      AnimationMode = LOOP
    End

    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = ZBARTPLAT_R
    End

    ; NIGHT ************************************************************
    ConditionState  = NIGHT
      Model         = ZBARTPLAT_N
    End
    ConditionState  = NIGHT CAPTURED
      Model         = ZBARTPLAT_N
;      Animation     = ZBARTPLAT_N.ZBARTPLAT_N
;      AnimationMode = LOOP
    End
    
    ; NIGHT DAMAGED ****************************************************
    ConditionState  = DAMAGED NIGHT
      Model         = ZBARTPLAT_D
    End
    ConditionState  = DAMAGED NIGHT CAPTURED
      Model         = ZBARTPLAT_D
;      Animation     = ZBARTPLAT_D.ZBARTPLAT_D
;      AnimationMode = LOOP
    End
    
    ; NIGHT REALLYDAMAGED **********************************************
    ConditionState  = REALLYDAMAGED NIGHT
      Model         = ZBARTPLAT_E
    End
    ConditionState  = REALLYDAMAGED NIGHT CAPTURED
      Model         = ZBARTPLAT_E
;      Animation     = ZBARTPLAT_E.ZBARTPLAT_E
;      AnimationMode = LOOP
    End

    ; NIGHT RUBBLE *****************************************************
    ConditionState  = NIGHT RUBBLE
      Model         = ZBARTPLAT_R
    End
    
    ; SNOW *************************************************************
    ConditionState  = SNOW
      Model         = ZBARTPLAT_S
    End
    ConditionState  = SNOW CAPTURED
      Model         = ZBARTPLAT_S
;      Animation     = ZBARTPLAT_S.ZBARTPLAT_S
;      AnimationMode = LOOP
    End
    
    ; SNOW DAMAGED *****************************************************
    ConditionState  = DAMAGED SNOW
      Model         = ZBARTPLAT_DS
    End
    ConditionState  = DAMAGED SNOW CAPTURED
      Model         = ZBARTPLAT_DS
;      Animation     = ZBARTPLAT_DS.ZBARTPLAT_DS
;      AnimationMode = LOOP
    End
    
    ; SNOW REALLYDAMAGED ***********************************************
    ConditionState  = REALLYDAMAGED SNOW
      Model         = ZBARTPLAT_ES
    End
    ConditionState  = REALLYDAMAGED SNOW CAPTURED
      Model         = ZBARTPLAT_ES
;      Animation     = ZBARTPLAT_ES.ZBARTPLAT_ES
;      AnimationMode = LOOP
    End

    ; SNOW RUBBLE ******************************************************
    ConditionState  = SNOW RUBBLE
      Model         = ZBARTPLAT_RS
    End
    
    ; SNOW NIGHT *******************************************************
    ConditionState  = SNOW NIGHT
      Model         = ZBARTPLAT_NS
    End
    ConditionState  = SNOW NIGHT CAPTURED
      Model         = ZBARTPLAT_NS
;      Animation     = ZBARTPLAT_NS.ZBARTPLAT_NS
;      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT DAMAGED ***********************************************
    ConditionState  = SNOW NIGHT DAMAGED
      Model         = ZBARTPLAT_DNS
    End
    ConditionState  = SNOW NIGHT DAMAGED CAPTURED
      Model         = ZBARTPLAT_DNS
;      Animation     = ZBARTPLAT_DNS.ZBARTPLAT_DNS
;      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT REALLYDAMAGED *****************************************
    ConditionState  = SNOW NIGHT REALLYDAMAGED
      Model         = ZBARTPLAT_ENS
    End
    ConditionState  = SNOW NIGHT REALLYDAMAGED CAPTURED
      Model         = ZBARTPLAT_ENS
;      Animation     = ZBARTPLAT_EN.ZBARTPLAT_ENS
;      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT RUBBLE ************************************************
    ConditionState  = SNOW NIGHT RUBBLE
      Model         = ZBARTPLAT_RS
    End
    
  End

  ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBODerrick_F
      Animation     = ZBODerrick_F.ZBODerrick_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBODerrick_FE
      Animation     = ZBODerrick_FE.ZBODerrick_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
 ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TechArtilleryPlatform
  EditorSorting   = STRUCTURE
  VisionRange    = 360.0
  ShroudClearingRange = 360
  ; *** ENGINEERING Parameters ***  
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE TECH_BUILDING CAN_ATTACK TECH_BASE_DEFENSE 
  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  WeaponSet
    Conditions           = None 
    Weapon               = PRIMARY ArtilleryPlatformGun
  End
  CommandSet = StopOnlyGenericCommandSet
  Behavior                = FlammableUpdate ModuleTag_05
    FlameDamageLimit      = 20    ; Catch fire if I take this much fire damage...
    FlameDamageExpiration = 2000  ; in a span of this long
    AflameDuration        = 5000  ; If I catch fire, I'll burn for this long...
    AflameDamageAmount    = 25    ; taking this much damage...
    AflameDamageDelay     = 500   ; this often.
  End
  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate        = 180   // turn rate, in degrees per sec
      TurretPitchRate       = 180
      AllowsPitch           = Yes
      NaturalTurretPitch    = 45   
      GroundUnitPitch       = 20
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY
      MinIdleScanInterval   = 250    ; in milliseconds
      MaxIdleScanInterval   = 250    ; in milliseconds
      MinIdleScanAngle      = 0       ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 360     ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes ;ATTACK_BUILDINGS; defensive weapon
    MoodAttackCheckRate        = 250
  End

  Behavior             = FXListDie ModuleTag_07
    DeathFX            = WeaponFX_BombTruckDefaultBombDetonation
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  Behavior = TransitionDamageFX ModuleTag_08
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  Behavior = TechBuildingBehavior ModuleTag_09
  End

  Behavior = FXListDie ModuleTag_10
    DeathFX = FX_BuildingDie
  End

  Behavior = InstantDeathBehavior DeathTag_01
    DeathTypes = ALL
    OCL = OCL_InitiateTechArtilleryPlatformDestroyedObject
  End

;  Behavior             = DestroyDie DeathTag_02
;    ;nothing
;  End

  Behavior = ProductionUpdate ModuleTag_12
  End
  Geometry              = BOX
  GeometryMajorRadius   = 23.0
  GeometryMinorRadius   = 21.0
  GeometryHeight        = 30.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME


End


;------------------------------------------------------------------------------
Object TechArtilleryPlatformDestroyed

  ; *** ART Parameters ***
  SelectPortrait         = SAArtillery_L
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model         = ZBARTPLAT_E
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponRecoilBone                = PRIMARY Barrel
    End
    
    ConditionState  = SNOW
      Model         = ZBARTPLAT_ES
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponRecoilBone                = PRIMARY Barrel
    End

    ConditionState    = RUBBLE
      Model           = NONE
    End

    ConditionState    = RUBBLE SNOW
      Model           = NONE
    End
  End

  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TechArtilleryPlatform
  Side                = Civilian
  EditorSorting   = STRUCTURE
  ShroudClearingRange = 100


  ArmorSet
    Conditions      = None
    Armor           = RussiaT14HeavyArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE CAPTURABLE SELECTABLE IMMOBILE NO_HEAL_ICON UNATTACKABLE TECH_BUILDING
  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 99999.0
    InitialHealth   = 99999.0
  End

    
  CommandSet            = DestroyedTechArtilleryPlatformCommandSet
  
  Behavior = AIUpdateInterface ModuleTag_04
  End
  
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 3000
    HealingDelay = 1 ; msec
    StartsActive = Yes
  End

  Behavior = ProductionUpdate ModuleTag_06
    NumDoorAnimations            = 1
    DoorOpeningTime              = 1  ;in mSeconds
    DoorWaitOpenTime             = 3  ;in mSeconds
    DoorCloseTime                = 1  ;in mSeconds
    ConstructionCompleteDuration = 1  ;in mSeconds
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_07
    UnitCreatePoint   = X:0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 0.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = InstantDeathBehavior DeathTag_01
    DeathTypes = ALL
    OCL = OCL_TechArtilleryPlatformRebuild
  End

  Geometry              = BOX
  GeometryMajorRadius   = 23.0
  GeometryMinorRadius   = 21.0
  GeometryHeight        = 30.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End


;------------------------------------------------------------------------------
Object TechReinforcementPad

  ; *** ART Parameters ***
  SelectPortrait         = LandingPad_L
  ButtonImage            = LandingPad
  Draw                 = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes   
    ConditionState       = NONE
      Model              = ZBLndBay
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay.ZBLndBay
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = ZBLndBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_D.ZBLndBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE
      Model              = ZBLndBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_E.ZBLndBay_E
      AnimationMode      = LOOP
    End
    
    ConditionState       = NIGHT
      Model              = ZBLndBay_N
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_N.ZBLndBay_N
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT
      Model              = ZBLndBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_D.ZBLndBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model              = ZBLndBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_E.ZBLndBay_E
      AnimationMode      = LOOP
    End
    
    ;----------- SNOW
    
    ConditionState       = SNOW
      Model              = ZBLndBay_S
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_S.ZBLndBay_S
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED SNOW
      Model              = ZBLndBay_DS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_DS.ZBLndBay_DS

      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model              = ZBLndBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_ES.ZBLndBay_ES
      AnimationMode      = LOOP
    End
    
    ;---------- SNOW NIGHT
    
    ConditionState       = NIGHT SNOW
      Model              = ZBLndBay_NS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_NS.ZBLndBay_NS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ZBLndBay_DSN
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_DSN.ZBLndBay_DSN
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ZBLndBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_ES.ZBLndBay_ES
      AnimationMode      = LOOP
    End
  End  
    ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBLndBay_F
      Animation     = ZBLndBay_F.ZBLndBay_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBLndBay_FE
      Animation     = ZBLndBay_FE.ZBLndBay_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
  PlacementViewAngle = 45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:TechReinforcementPad
  EditorSorting       = STRUCTURE
  Prerequisites
  End
  EnergyProduction = 0
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level
  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyDropZoneSelect

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***  
  KindOf              = STRUCTURE SELECTABLE IMMOBILE TECH_BUILDING CAPTURABLE NO_COLLIDE AUTO_RALLYPOINT
  RadarPriority       = STRUCTURE
  
  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 2000.0
    InitialHealth     = 2000.0
  End

  Behavior       = OCLUpdate ModuleTag_05 ; Context window is a reaction to this, no CommandSet 
    MinDelay     = 120000
    MaxDelay     = 120000
    CreateAtEdge = Yes ; as opposed to just creating on self

    FactionTriggered = Yes ; This requires a controlling player before it works
    FactionOCL   = Faction:America                   OCL:OCL_ReinforcementPadUSAVehicle

    FactionOCL   = Faction:China                     OCL:OCL_ReinforcementPadCHIVehicle
    FactionOCL   = Faction:ChinaNukeGeneral          OCL:OCL_NukeGen_ReinforcementPadCHIVehicle

    FactionOCL   = Faction:GLA                       OCL:OCL_ReinforcementPadGLAVehicle
  End
  
  Behavior            = DefaultProductionExitUpdate ModuleTag_07
    NaturalRallyPoint = X: 0.0  Y:-60.0  Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
    UseSpawnRallyPoint = Yes
  End

  Behavior             = FlammableUpdate ModuleTag_09
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End
  Behavior = TechBuildingBehavior ModuleTag_12
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = InstantDeathBehavior DeathTag_01
    DeathTypes = ALL
    OCL = OCL_InitiateReinforecmentPadDestroyedObject
  End

;  Behavior             = DestroyDie DeathTag_02
;    ;nothing
;  End

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 15.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object TechReinforcementPadDestroyed

  ; *** ART Parameters ***
  SelectPortrait         = LandingPad_L
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model              = ZBLndBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_E.ZBLndBay_E
      AnimationMode      = LOOP
    End
    
    ConditionState  = SNOW
      Model              = ZBLndBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_E.ZBLndBay_E
      AnimationMode      = LOOP
    End

    ConditionState    = RUBBLE
      Model           = NONE
    End

    ConditionState    = RUBBLE SNOW
      Model           = NONE
    End
  End

    ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBLndBay_F
      Animation     = ZBLndBay_F.ZBLndBay_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBLndBay_FE
      Animation     = ZBLndBay_FE.ZBLndBay_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End


  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TechReinforcementPad
  Side                = Civilian
  EditorSorting   = STRUCTURE
  ShroudClearingRange = 100


  ArmorSet
    Conditions      = None
    Armor           = RussiaT14HeavyArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE CAPTURABLE SELECTABLE IMMOBILE NO_HEAL_ICON UNATTACKABLE TECH_BUILDING
  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 99999.0
    InitialHealth   = 99999.0
  End

    
  CommandSet            = DestroyedReinforcementPadCommandSet
  
  Behavior = AIUpdateInterface ModuleTag_04
  End
  
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 3000
    HealingDelay = 1 ; msec
    StartsActive = Yes
  End

  Behavior = ProductionUpdate ModuleTag_06
    NumDoorAnimations            = 1
    DoorOpeningTime              = 1  ;in mSeconds
    DoorWaitOpenTime             = 3  ;in mSeconds
    DoorCloseTime                = 1  ;in mSeconds
    ConstructionCompleteDuration = 1  ;in mSeconds
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_07
    UnitCreatePoint   = X:0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 0.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = InstantDeathBehavior DeathTag_01
    DeathTypes = ALL
    OCL = OCL_ReinforecmentPadRebuild
  End

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 15.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
End

;-------------------------------------------------------------------------------

Object TechReinforcementPad_T-90M_Only

  ; *** ART Parameters ***
  SelectPortrait         = LandingPad_L
  ButtonImage            = LandingPad
  Draw                 = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes   
    ConditionState       = NONE
      Model              = ZBLndBay
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay.ZBLndBay
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = ZBLndBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_D.ZBLndBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE
      Model              = ZBLndBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_E.ZBLndBay_E
      AnimationMode      = LOOP
    End
    
    ConditionState       = NIGHT
      Model              = ZBLndBay_N
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_N.ZBLndBay_N
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT
      Model              = ZBLndBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_D.ZBLndBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model              = ZBLndBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_E.ZBLndBay_E
      AnimationMode      = LOOP
    End
    
    ;----------- SNOW
    
    ConditionState       = SNOW
      Model              = ZBLndBay_S
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_S.ZBLndBay_S
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED SNOW
      Model              = ZBLndBay_DS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_DS.ZBLndBay_DS

      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model              = ZBLndBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_ES.ZBLndBay_ES
      AnimationMode      = LOOP
    End
    
    ;---------- SNOW NIGHT
    
    ConditionState       = NIGHT SNOW
      Model              = ZBLndBay_NS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_NS.ZBLndBay_NS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ZBLndBay_DSN
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_DSN.ZBLndBay_DSN
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ZBLndBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_ES.ZBLndBay_ES
      AnimationMode      = LOOP
    End
  End  
    ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBLndBay_F
      Animation     = ZBLndBay_F.ZBLndBay_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBLndBay_FE
      Animation     = ZBLndBay_FE.ZBLndBay_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
  PlacementViewAngle = 45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:TechReinforcementPad_T90M
  EditorSorting       = STRUCTURE
  Prerequisites
  End
  EnergyProduction = 0
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level
  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyDropZoneSelect

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***  
  KindOf              = STRUCTURE SELECTABLE IMMOBILE TECH_BUILDING CAPTURABLE NO_COLLIDE AUTO_RALLYPOINT
  RadarPriority       = STRUCTURE
  
  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 2000.0
    InitialHealth     = 2000.0
  End

  Behavior       = OCLUpdate ModuleTag_05 ; Context window is a reaction to this, no CommandSet 
    MinDelay     = 120000
    MaxDelay     = 120000
    CreateAtEdge = Yes ; as opposed to just creating on self

    FactionTriggered = Yes ; This requires a controlling player before it works
    FactionOCL   = Faction:America                   OCL:OCL_ReinforcementPadT90MDelivery

    FactionOCL   = Faction:China                     OCL:OCL_ReinforcementPadT90MDelivery
    FactionOCL   = Faction:ChinaNukeGeneral          OCL:OCL_ReinforcementPadT90MDelivery

    FactionOCL   = Faction:GLA                       OCL:OCL_ReinforcementPadT90MDelivery
  End

  ;Behavior = DestroyDie ModuleTag_06
  ;End
  
  Behavior            = DefaultProductionExitUpdate ModuleTag_07
    NaturalRallyPoint = X: 0.0  Y:-60.0  Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
    UseSpawnRallyPoint = Yes
  End

  Behavior             = CreateObjectDie ModuleTag_08
    CreationList       = OCL_LargeStructureDebris
  End

  Behavior             = FlammableUpdate ModuleTag_09
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End
  Behavior = TechBuildingBehavior ModuleTag_12
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 15.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End




;------------------------------------------------------------------------------
Object TechRepairPad

  ; *** ART Parameters ***
  SelectPortrait         = SADropZone_L
  ButtonImage            = SADropZone
  Draw                 = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes   
    ConditionState       = NONE
      Model              = ABSupDrop
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop.ABSupDrop
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = ABSupDrop_D
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_D.ABSupDrop_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE
      Model              = ABSupDrop_E
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_E.ABSupDrop_E
      AnimationMode      = LOOP
    End
    
    ConditionState       = NIGHT
      Model              = ABSupDrop_N
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_N.ABSupDrop_N
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT
      Model              = ABSupDrop_DN
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_DN.ABSupDrop_DN
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model              = ABSupDrop_EN
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_EN.ABSupDrop_EN
      AnimationMode      = LOOP
    End
    
    ;----------- SNOW
    
    ConditionState       = SNOW
      Model              = ABSupDrop_S
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_S.ABSupDrop_S
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED SNOW
      Model              = ABSupDrop_DS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_DS.ABSupDrop_DS

      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model              = ABSupDrop_ES
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_ES.ABSupDrop_ES
      AnimationMode      = LOOP
    End
    
    ;---------- SNOW NIGHT
    
    ConditionState       = NIGHT SNOW
      Model              = ABSupDrop_NS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_NS.ABSupDrop_NS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ABSupDrop_DNS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_DNS.ABSupDrop_DNS
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ABSupDrop_ENS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_ENS.ABSupDrop_ENS
      AnimationMode      = LOOP
    End
  End  
    ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBODerrick_F
      Animation     = ZBODerrick_F.ZBODerrick_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBODerrick_FE
      Animation     = ZBODerrick_FE.ZBODerrick_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:TechRepairPad
  EditorSorting       = STRUCTURE
  Prerequisites
  End
  EnergyProduction = 0
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level
 ;**FIX**?
 ;CommandSet          = TechReinforcementPadCommandSet
  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyDropZoneSelect

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***  
  KindOf              = STRUCTURE SELECTABLE IMMOBILE TECH_BUILDING CAPTURABLE REPAIR_PAD
  RadarPriority       = STRUCTURE
  
  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 2000.0
    InitialHealth     = 2000.0
  End
  Behavior = RepairDockUpdate ModuleTag_05
    TimeForFullHeal   = 5000   ;(in milliseconds)   
    AllowsPassthrough = Yes 
    NumberApproachPositions = 5
  End

  ;Behavior  = DestroyDie ModuleTag_06
  ;End
  Behavior                  = CreateObjectDie ModuleTag_08
    CreationList       = OCL_LargeStructureDebris
  End

  Behavior             = FlammableUpdate ModuleTag_09
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End
  Behavior = TechBuildingBehavior ModuleTag_12
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 27.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End
;------------------------------------------------------------------------------
Object TechRepairbay

  ; *** ART Parameters ***
  SelectPortrait         = RepairBay_L
  ButtonImage            = RepairBay_L
  Draw                 = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes   
    ConditionState       = NONE
      Model              = ZBRprBay
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay.ZBRprBay
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = ZBRprBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_D.ZBRprBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE
      Model              = ZBRprBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_E.ZBRprBay_E
      AnimationMode      = LOOP
    End
    
    ConditionState       = NIGHT
      Model              = ZBRprBay_N
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_N.ZBRprBay_N
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT
      Model              = ZBRprBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_D.ZBRprBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model              = ZBRprBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_E.ZBRprBay_E
      AnimationMode      = LOOP
    End
    
    ;----------- SNOW
    
    ConditionState       = SNOW
      Model              = ZBRprBay_S
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_S.ZBRprBay_S
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED SNOW
      Model              = ZBRprBay_DS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_DS.ZBRprBay_DS

      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model              = ZBRprBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_ES.ZBRprBay_ES
      AnimationMode      = LOOP
    End
    
    ;---------- SNOW NIGHT
    
    ConditionState       = NIGHT SNOW
      Model              = ZBRprBay_NS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_NS.ZBRprBay_NS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ZBRprBay_DSN
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_DSN.ZBRprBay_DSN
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ZBRprBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_ES.ZBRprBay_ES
      AnimationMode      = LOOP
    End

  End  
    ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBRprBay_F
      Animation     = ZBRprBay_F.ZBRprBay_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBRprBay_FE
      Animation     = ZBRprBay_FE.ZBRprBay_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
  PlacementViewAngle = 45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:TechRepairBay
  EditorSorting       = STRUCTURE
  Prerequisites
  End
  EnergyProduction = 0
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level
  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyDropZoneSelect

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***  
  KindOf              = STRUCTURE SELECTABLE IMMOBILE TECH_BUILDING CAPTURABLE NO_COLLIDE
  RadarPriority       = STRUCTURE
  
  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 2000.0
    InitialHealth     = 2000.0
  End

  Behavior             = FlammableUpdate ModuleTag_09
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End
  Behavior = TechBuildingBehavior ModuleTag_12
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  

  Behavior = AutoHealBehavior ModuleTag_AutoHeal01
    HealingAmount     = 3
    HealingDelay      = 1000 ; msec
    AffectsWholePlayer = Yes
    StartsActive      = Yes
    KindOf            = VEHICLE
    ForbiddenKindOf   = AIRCRAFT
  End


  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = InstantDeathBehavior DeathTag_01
    DeathTypes = ALL
    OCL = OCL_InitiateTechRepairbayDestroyedObject
  End

;  Behavior             = DestroyDie DeathTag_02
;    ;nothing
;  End

  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 27.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End


;------------------------------------------------------------------------------
Object TechRepairbayDestroyed

  ; *** ART Parameters ***
  SelectPortrait         = RepairBay_L
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model              = ZBRprBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_E.ZBRprBay_E
      AnimationMode      = LOOP
    End
    
    ConditionState  = SNOW
      Model              = ZBRprBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_E.ZBRprBay_E
      AnimationMode      = LOOP
    End

    ConditionState    = RUBBLE
      Model           = NONE
    End

    ConditionState    = RUBBLE SNOW
      Model           = NONE
    End
  End

    ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBRprBay_F
      Animation     = ZBRprBay_F.ZBRprBay_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBRprBay_FE
      Animation     = ZBRprBay_FE.ZBRprBay_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End


  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TechRepairBay
  Side                = Civilian
  EditorSorting   = STRUCTURE
  ShroudClearingRange = 100


  ArmorSet
    Conditions      = None
    Armor           = RussiaT14HeavyArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** ENGINEERING Parameters ***  
  KindOf            = STRUCTURE CAPTURABLE SELECTABLE IMMOBILE NO_HEAL_ICON UNATTACKABLE TECH_BUILDING
  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 99999.0
    InitialHealth   = 99999.0
  End

    
  CommandSet            = DestroyedTechRepairBayCommandSet 
  
  Behavior = AIUpdateInterface ModuleTag_04
  End
  
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 3000
    HealingDelay = 1 ; msec
    StartsActive = Yes
  End

  Behavior = ProductionUpdate ModuleTag_06
    NumDoorAnimations            = 1
    DoorOpeningTime              = 1  ;in mSeconds
    DoorWaitOpenTime             = 3  ;in mSeconds
    DoorCloseTime                = 1  ;in mSeconds
    ConstructionCompleteDuration = 1  ;in mSeconds
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_07
    UnitCreatePoint   = X:0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 0.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

;  Behavior = FireWeaponUpdate ModuleTag_11
;    Weapon = RUSupplyPileNeutralizeWeapon
;    InitialDelay = 1500
;  End

;Upgrades----------------------------------------------------------

;End of Upgrades----------------------------------------------------------

  Behavior = InstantDeathBehavior DeathTag_01
    DeathTypes = ALL
    OCL = OCL_TechRepairbayRebuild
  End


  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 27.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
End